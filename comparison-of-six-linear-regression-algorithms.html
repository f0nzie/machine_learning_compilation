<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 33 Comparison of six Linear Regression algorithms | A Machine Learning Compilation</title>
<meta name="author" content="Several authors. Compiled by Alfonso R. Reyes">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.2.9000/tabs.js"></script><script src="libs/bs3compat-0.2.2.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">A Machine Learning Compilation</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Preface</a></li>
<li class="book-part">The Basics of Machine Learning</li>
<li><a class="" href="introduction-to-pca.html"><span class="header-section-number">2</span> Introduction to PCA</a></li>
<li><a class="" href="comparison-of-two-pca-packages.html"><span class="header-section-number">3</span> Comparison of two PCA packages</a></li>
<li><a class="" href="detailed-study-of-principal-component-analysis.html"><span class="header-section-number">4</span> Detailed study of Principal Component Analysis</a></li>
<li><a class="" href="detection-of-diabetes-using-logistic-regression.html"><span class="header-section-number">5</span> Detection of diabetes using Logistic Regression</a></li>
<li><a class="" href="sensitivity-analysis-for-a-neural-network.html"><span class="header-section-number">6</span> Sensitivity analysis for a neural network</a></li>
<li><a class="" href="data-visualization-for-ml-models.html"><span class="header-section-number">7</span> Data Visualization for ML models</a></li>
<li class="book-part">Feature Engineering</li>
<li><a class="" href="ten-methods-to-assess-variable-importance.html"><span class="header-section-number">8</span> Ten methods to assess Variable Importance</a></li>
<li><a class="" href="employee-attrition-using-feature-importance.html"><span class="header-section-number">9</span> Employee Attrition using Feature Importance</a></li>
<li class="book-part">Classification</li>
<li><a class="" href="a-gentle-introduction-to-support-vector-machines.html"><span class="header-section-number">10</span> A gentle introduction to Support Vector Machines</a></li>
<li><a class="" href="broad-view-of-svm.html"><span class="header-section-number">11</span> Broad view of SVM</a></li>
<li><a class="" href="feature-selection-to-enhance-cancer-detection.html"><span class="header-section-number">12</span> Feature Selection to enhance cancer detection</a></li>
<li><a class="" href="dealing-with-unbalanced-data.html"><span class="header-section-number">13</span> Dealing with unbalanced data</a></li>
<li><a class="" href="imputting-missing-values-with-random-forest.html"><span class="header-section-number">14</span> Imputting missing values with Random Forest</a></li>
<li><a class="" href="tuning-of-support-vector-machine-prediction.html"><span class="header-section-number">15</span> Tuning of Support Vector Machine prediction</a></li>
<li class="book-part">Classification</li>
<li><a class="" href="introduction-to-algorithms-for-classification.html"><span class="header-section-number">16</span> Introduction to algorithms for Classification</a></li>
<li><a class="" href="comparing-classification-algorithms.html"><span class="header-section-number">17</span> Comparing Classification algorithms</a></li>
<li><a class="" href="who-buys-social-network-ads.html"><span class="header-section-number">18</span> Who buys Social Network ads</a></li>
<li><a class="" href="predicting-ozone-levels.html"><span class="header-section-number">19</span> Predicting Ozone levels</a></li>
<li><a class="" href="building-a-naive-bayes-classifier.html"><span class="header-section-number">20</span> Building a Naive Bayes Classifier</a></li>
<li><a class="" href="linear-and-non-linear-algorithms-for-classification.html"><span class="header-section-number">21</span> Linear and Non-Linear Algorithms for Classification</a></li>
<li><a class="" href="detect-mines-vs-rocks-with-random-forest.html"><span class="header-section-number">22</span> Detect mines vs rocks with Random Forest</a></li>
<li><a class="" href="predicting-the-type-of-glass.html"><span class="header-section-number">23</span> Predicting the type of glass</a></li>
<li><a class="" href="naive-bayes-for-sms-spam.html"><span class="header-section-number">24</span> Naive Bayes for SMS spam</a></li>
<li><a class="" href="vehicles-classiification-with-decision-trees.html"><span class="header-section-number">25</span> Vehicles classiification with Decision Trees</a></li>
<li><a class="" href="applying-naive-bayes-on-the-titanic-case.html"><span class="header-section-number">26</span> Applying Naive-Bayes on the Titanic case</a></li>
<li><a class="" href="classification-on-bad-loans.html"><span class="header-section-number">27</span> Classification on bad loans</a></li>
<li><a class="" href="predicting-flu-outcome-comparing-eight-classification-algorithms.html"><span class="header-section-number">28</span> Predicting Flu outcome comparing eight classification algorithms</a></li>
<li><a class="" href="a-detailed-study-of-bike-sharing-demand.html"><span class="header-section-number">29</span> A detailed study of bike sharing demand</a></li>
<li><a class="" href="prediction-of-arrhythmia-with-deep-neural-nets.html"><span class="header-section-number">30</span> Prediction of arrhythmia with deep neural nets</a></li>
<li class="book-part">Linear Regression</li>
<li><a class="" href="linear-regression-with-islr.html"><span class="header-section-number">31</span> Linear Regression with ISLR</a></li>
<li><a class="" href="evaluation-of-three-linear-regression-models.html"><span class="header-section-number">32</span> Evaluation of three linear regression models</a></li>
<li><a class="active" href="comparison-of-six-linear-regression-algorithms.html"><span class="header-section-number">33</span> Comparison of six Linear Regression algorithms</a></li>
<li><a class="" href="comparing-regression-models.html"><span class="header-section-number">34</span> Comparing regression models</a></li>
<li><a class="" href="finding-the-factors-of-happiness.html"><span class="header-section-number">35</span> Finding the factors of happiness</a></li>
<li><a class="" href="regression-with-a-neural-network.html"><span class="header-section-number">36</span> Regression with a neural network</a></li>
<li><a class="" href="comparing-multiple-regression-vs-a-neural-network.html"><span class="header-section-number">37</span> Comparing Multiple Regression vs a Neural Network</a></li>
<li><a class="" href="temperature-modeling-using-nested-dataframes.html"><span class="header-section-number">38</span> Temperature modeling using nested dataframes</a></li>
<li class="book-part">Neural Networks</li>
<li><a class="" href="credit-scoring-with-neuralnet.html"><span class="header-section-number">39</span> Credit Scoring with neuralnet</a></li>
<li><a class="" href="wine-classification-with-neuralnet.html"><span class="header-section-number">40</span> Wine classification with neuralnet</a></li>
<li><a class="" href="predicting-the-rating-of-cereals.html"><span class="header-section-number">41</span> Predicting the rating of cereals</a></li>
<li><a class="" href="fitting-a-linear-model-with-neural-networks.html"><span class="header-section-number">42</span> Fitting a linear model with neural networks</a></li>
<li><a class="" href="visualization-of-neural-networks.html"><span class="header-section-number">43</span> Visualization of neural networks</a></li>
<li><a class="" href="build-a-fully-connected-r-neural-network-from-scratch.html"><span class="header-section-number">44</span> Build a fully connected R neural network from scratch</a></li>
<li><a class="" href="tuning-hyperparameters-in-a-neural-network.html"><span class="header-section-number">45</span> Tuning Hyperparameters in a Neural Network</a></li>
<li><a class="" href="deep-learning-tips-for-classification-and-regression.html"><span class="header-section-number">46</span> Deep Learning tips for Classification and Regression</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="what-is-dot-hat-in-a-regression-output.html"><span class="header-section-number">A</span> What is dot hat in a regression output</a></li>
<li><a class="" href="q-q-normal-to-compare-data-to-distributions.html"><span class="header-section-number">B</span> Q-Q normal to compare data to distributions</a></li>
<li><a class="" href="qq-and-pp-plots.html"><span class="header-section-number">C</span> QQ and PP Plots</a></li>
<li><a class="" href="visualizing-residuals.html"><span class="header-section-number">D</span> Visualizing residuals</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/f0nzie/machine_learning_compilation">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="comparison-of-six-linear-regression-algorithms" class="section level1">
<h1>
<span class="header-section-number">33</span> Comparison of six Linear Regression algorithms<a class="anchor" aria-label="anchor" href="#comparison-of-six-linear-regression-algorithms"><i class="fas fa-link"></i></a>
</h1>
<ul>
<li>Datasets: <code>Boston</code>
</li>
<li>Algorithms:
<ul>
<li><em>LM, GKM, GLMNET, SVM, CART, KNN</em></li>
</ul>
</li>
<li>Objective: Comparison of various algorithms</li>
</ul>
<div id="introduction-16" class="section level2">
<h2>
<span class="header-section-number">33.1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction-16"><i class="fas fa-link"></i></a>
</h2>
<p>These are the algorithms used:</p>
<ol style="list-style-type: decimal">
<li>LM</li>
<li>GLM</li>
<li>GLMNET</li>
<li>SVM</li>
<li>CART</li>
<li>KNN</li>
</ol>
<div class="sourceCode" id="cb824"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">mlbench</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/topepo/caret/">caret</a></span><span class="op">)</span>
<span class="co">#&gt; Loading required package: lattice</span>
<span class="co">#&gt; Loading required package: ggplot2</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/taiyun/corrplot">corrplot</a></span><span class="op">)</span>
<span class="co">#&gt; corrplot 0.84 loaded</span>

<span class="co"># attach the BostonHousing dataset</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">BostonHousing</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb825"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">BostonHousing</span><span class="op">)</span>
<span class="co">#&gt; Rows: 506</span>
<span class="co">#&gt; Columns: 14</span>
<span class="co">#&gt; $ crim    &lt;dbl&gt; 0.00632, 0.02731, 0.02729, 0.03237, 0.06905, 0.02985, 0.08829…</span>
<span class="co">#&gt; $ zn      &lt;dbl&gt; 18.0, 0.0, 0.0, 0.0, 0.0, 0.0, 12.5, 12.5, 12.5, 12.5, 12.5, …</span>
<span class="co">#&gt; $ indus   &lt;dbl&gt; 2.31, 7.07, 7.07, 2.18, 2.18, 2.18, 7.87, 7.87, 7.87, 7.87, 7…</span>
<span class="co">#&gt; $ chas    &lt;fct&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…</span>
<span class="co">#&gt; $ nox     &lt;dbl&gt; 0.538, 0.469, 0.469, 0.458, 0.458, 0.458, 0.524, 0.524, 0.524…</span>
<span class="co">#&gt; $ rm      &lt;dbl&gt; 6.58, 6.42, 7.18, 7.00, 7.15, 6.43, 6.01, 6.17, 5.63, 6.00, 6…</span>
<span class="co">#&gt; $ age     &lt;dbl&gt; 65.2, 78.9, 61.1, 45.8, 54.2, 58.7, 66.6, 96.1, 100.0, 85.9, …</span>
<span class="co">#&gt; $ dis     &lt;dbl&gt; 4.09, 4.97, 4.97, 6.06, 6.06, 6.06, 5.56, 5.95, 6.08, 6.59, 6…</span>
<span class="co">#&gt; $ rad     &lt;dbl&gt; 1, 2, 2, 3, 3, 3, 5, 5, 5, 5, 5, 5, 5, 4, 4, 4, 4, 4, 4, 4, 4…</span>
<span class="co">#&gt; $ tax     &lt;dbl&gt; 296, 242, 242, 222, 222, 222, 311, 311, 311, 311, 311, 311, 3…</span>
<span class="co">#&gt; $ ptratio &lt;dbl&gt; 15.3, 17.8, 17.8, 18.7, 18.7, 18.7, 15.2, 15.2, 15.2, 15.2, 1…</span>
<span class="co">#&gt; $ b       &lt;dbl&gt; 397, 397, 393, 395, 397, 394, 396, 397, 387, 387, 393, 397, 3…</span>
<span class="co">#&gt; $ lstat   &lt;dbl&gt; 4.98, 9.14, 4.03, 2.94, 5.33, 5.21, 12.43, 19.15, 29.93, 17.1…</span>
<span class="co">#&gt; $ medv    &lt;dbl&gt; 24.0, 21.6, 34.7, 33.4, 36.2, 28.7, 22.9, 27.1, 16.5, 18.9, 1…</span></code></pre></div>
<div class="sourceCode" id="cb826"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="va">BostonHousing</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 506 x 14</span>
<span class="co">#&gt;      crim    zn indus chas    nox    rm   age   dis   rad   tax ptratio     b</span>
<span class="co">#&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 0.00632    18  2.31 0     0.538  6.58  65.2  4.09     1   296    15.3  397.</span>
<span class="co">#&gt; 2 0.0273      0  7.07 0     0.469  6.42  78.9  4.97     2   242    17.8  397.</span>
<span class="co">#&gt; 3 0.0273      0  7.07 0     0.469  7.18  61.1  4.97     2   242    17.8  393.</span>
<span class="co">#&gt; 4 0.0324      0  2.18 0     0.458  7.00  45.8  6.06     3   222    18.7  395.</span>
<span class="co">#&gt; 5 0.0690      0  2.18 0     0.458  7.15  54.2  6.06     3   222    18.7  397.</span>
<span class="co">#&gt; 6 0.0298      0  2.18 0     0.458  6.43  58.7  6.06     3   222    18.7  394.</span>
<span class="co">#&gt; # … with 500 more rows, and 2 more variables: lstat &lt;dbl&gt;, medv &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="workflow-4" class="section level2">
<h2>
<span class="header-section-number">33.2</span> Workflow<a class="anchor" aria-label="anchor" href="#workflow-4"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>Load dataset</li>
<li>Create train and test datasets, 80/20</li>
<li>Inspect dataset:</li>
</ol>
<ul>
<li>Dimension</li>
<li>classes</li>
<li><code>skimr</code></li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>Analyze features</li>
</ol>
<ul>
<li>correlation</li>
</ul>
<ol start="5" style="list-style-type: decimal">
<li>Visualize features</li>
</ol>
<ul>
<li>histograms</li>
<li>density plots</li>
<li>pairwise</li>
<li>correlogram</li>
</ul>
<ol start="5" style="list-style-type: decimal">
<li>Train as-is<br>
</li>
</ol>
<ul>
<li>Set the train control to
<ul>
<li>10 cross-validations</li>
<li>3 repetitions</li>
<li>Metric: RMSE</li>
</ul>
</li>
<li>Train the models</li>
<li>Compare accuracy of models</li>
<li>Visual comparison
<ul>
<li>dot plot</li>
</ul>
</li>
</ul>
<ol start="6" style="list-style-type: decimal">
<li>Train with Feature selection</li>
</ol>
<ul>
<li>Feature selection
<ul>
<li><code>findCorrelation</code></li>
<li>generate new dataset</li>
</ul>
</li>
<li>Train models again<br>
</li>
<li>Compare RMSE again</li>
<li>Visual comparison
<ul>
<li>dot plot<br>
</li>
</ul>
</li>
</ul>
<ol start="7" style="list-style-type: decimal">
<li>Train with dataset transformation</li>
</ol>
<ul>
<li>data transformatiom
<ul>
<li>Center</li>
<li>Scale</li>
<li>BoxCox</li>
</ul>
</li>
<li>Train models</li>
<li>Compare RMSE</li>
<li>Visual comparison
<ul>
<li>dot plot</li>
</ul>
</li>
</ul>
<ol start="8" style="list-style-type: decimal">
<li>Tune the best model</li>
</ol>
<ul>
<li>Set the train control to
<ul>
<li>10 cross-validations</li>
<li>3 repetitions</li>
<li>Metric: RMSE</li>
</ul>
</li>
<li>Train the models
<ul>
<li>Radial SVM</li>
<li>Sigma vector</li>
<li>.C</li>
<li>BoxCox
9, Ensembling</li>
</ul>
</li>
<li>Select the algorithms
<ul>
<li>Random Forest</li>
<li>Stochastic Gradient Boosting</li>
<li>Cubist</li>
</ul>
</li>
<li>Numeric comparison
<ul>
<li>resample</li>
<li>summary</li>
</ul>
</li>
<li>Visual comparison</li>
<li>dot plot</li>
</ul>
<ol start="10" style="list-style-type: decimal">
<li>Tune the best model: Cubist</li>
</ol>
<ul>
<li>Set the train control to
<ul>
<li>10 cross-validations</li>
<li>3 repetitions</li>
<li>Metric: RMSE</li>
</ul>
</li>
<li>Train the models
<ul>
<li>Cubist</li>
<li><code>.committees</code></li>
<li><code>.neighbors</code></li>
<li>BoxCox</li>
</ul>
</li>
<li>Evaluate the tuning parameters
<ul>
<li>Numeric comparison
<ul>
<li>print tuned model</li>
</ul>
</li>
<li>Visual comparison
<ul>
<li>scatter plot</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="11" style="list-style-type: decimal">
<li>Finalize the model</li>
</ol>
<ul>
<li>Back transformation</li>
<li>Summary</li>
</ul>
<ol start="12" style="list-style-type: decimal">
<li>Apply model to validation set
<ul>
<li>Transform the dataset</li>
<li>Make prediction</li>
<li>Calculate the RMSE</li>
</ul>
</li>
</ol>
</div>
<div id="preparing-the-data" class="section level2">
<h2>
<span class="header-section-number">33.3</span> Preparing the data<a class="anchor" aria-label="anchor" href="#preparing-the-data"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb827"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Split out validation dataset</span>
<span class="co"># create a list of 80% of the rows in the original dataset we can use for training</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">validationIndex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/createDataPartition.html">createDataPartition</a></span><span class="op">(</span><span class="va">BostonHousing</span><span class="op">$</span><span class="va">medv</span>, 
                                       p<span class="op">=</span><span class="fl">0.80</span>, list<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># select 20% of the data for validation</span>
<span class="va">validation</span> <span class="op">&lt;-</span> <span class="va">BostonHousing</span><span class="op">[</span><span class="op">-</span><span class="va">validationIndex</span>,<span class="op">]</span>

<span class="co"># use the remaining 80% of data to training and testing the models</span>
<span class="va">dataset</span> <span class="op">&lt;-</span> <span class="va">BostonHousing</span><span class="op">[</span><span class="va">validationIndex</span>,<span class="op">]</span></code></pre></div>
<div class="sourceCode" id="cb828"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># dimensions of dataset</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">validation</span><span class="op">)</span>
<span class="co">#&gt; [1] 99 14</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span>
<span class="co">#&gt; [1] 407  14</span></code></pre></div>
<div class="sourceCode" id="cb829"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># list types for each attribute</span>
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">dataset</span>, <span class="va">class</span><span class="op">)</span>
<span class="co">#&gt;      crim        zn     indus      chas       nox        rm       age       dis </span>
<span class="co">#&gt; "numeric" "numeric" "numeric"  "factor" "numeric" "numeric" "numeric" "numeric" </span>
<span class="co">#&gt;       rad       tax   ptratio         b     lstat      medv </span>
<span class="co">#&gt; "numeric" "numeric" "numeric" "numeric" "numeric" "numeric"</span></code></pre></div>
<div class="sourceCode" id="cb830"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># take a peek at the first 20 rows of the data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">dataset</span>, n<span class="op">=</span><span class="fl">20</span><span class="op">)</span>
<span class="co">#&gt;       crim   zn indus chas   nox   rm   age  dis rad tax ptratio   b lstat medv</span>
<span class="co">#&gt; 1  0.00632 18.0  2.31    0 0.538 6.58  65.2 4.09   1 296    15.3 397  4.98 24.0</span>
<span class="co">#&gt; 2  0.02731  0.0  7.07    0 0.469 6.42  78.9 4.97   2 242    17.8 397  9.14 21.6</span>
<span class="co">#&gt; 3  0.02729  0.0  7.07    0 0.469 7.18  61.1 4.97   2 242    17.8 393  4.03 34.7</span>
<span class="co">#&gt; 4  0.03237  0.0  2.18    0 0.458 7.00  45.8 6.06   3 222    18.7 395  2.94 33.4</span>
<span class="co">#&gt; 5  0.06905  0.0  2.18    0 0.458 7.15  54.2 6.06   3 222    18.7 397  5.33 36.2</span>
<span class="co">#&gt; 6  0.02985  0.0  2.18    0 0.458 6.43  58.7 6.06   3 222    18.7 394  5.21 28.7</span>
<span class="co">#&gt; 7  0.08829 12.5  7.87    0 0.524 6.01  66.6 5.56   5 311    15.2 396 12.43 22.9</span>
<span class="co">#&gt; 10 0.17004 12.5  7.87    0 0.524 6.00  85.9 6.59   5 311    15.2 387 17.10 18.9</span>
<span class="co">#&gt; 11 0.22489 12.5  7.87    0 0.524 6.38  94.3 6.35   5 311    15.2 393 20.45 15.0</span>
<span class="co">#&gt; 12 0.11747 12.5  7.87    0 0.524 6.01  82.9 6.23   5 311    15.2 397 13.27 18.9</span>
<span class="co">#&gt; 13 0.09378 12.5  7.87    0 0.524 5.89  39.0 5.45   5 311    15.2 390 15.71 21.7</span>
<span class="co">#&gt; 14 0.62976  0.0  8.14    0 0.538 5.95  61.8 4.71   4 307    21.0 397  8.26 20.4</span>
<span class="co">#&gt; 15 0.63796  0.0  8.14    0 0.538 6.10  84.5 4.46   4 307    21.0 380 10.26 18.2</span>
<span class="co">#&gt; 17 1.05393  0.0  8.14    0 0.538 5.93  29.3 4.50   4 307    21.0 387  6.58 23.1</span>
<span class="co">#&gt; 20 0.72580  0.0  8.14    0 0.538 5.73  69.5 3.80   4 307    21.0 391 11.28 18.2</span>
<span class="co">#&gt; 21 1.25179  0.0  8.14    0 0.538 5.57  98.1 3.80   4 307    21.0 377 21.02 13.6</span>
<span class="co">#&gt; 22 0.85204  0.0  8.14    0 0.538 5.96  89.2 4.01   4 307    21.0 393 13.83 19.6</span>
<span class="co">#&gt; 23 1.23247  0.0  8.14    0 0.538 6.14  91.7 3.98   4 307    21.0 397 18.72 15.2</span>
<span class="co">#&gt; 24 0.98843  0.0  8.14    0 0.538 5.81 100.0 4.10   4 307    21.0 395 19.88 14.5</span>
<span class="co">#&gt; 25 0.75026  0.0  8.14    0 0.538 5.92  94.1 4.40   4 307    21.0 394 16.30 15.6</span></code></pre></div>
<div class="sourceCode" id="cb831"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/skimr">skimr</a></span><span class="op">)</span>
<span class="fu"><a href="https://docs.ropensci.org/skimr/reference/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://docs.ropensci.org/skimr/reference/skim_with.html">skim_with</a></span><span class="op">(</span>numeric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>hist <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Creating new skimming functions for the following classes: hist.</span>
<span class="co">#&gt; They did not have recognized defaults. Call get_default_skimmers() for more information.</span>
<span class="co">#&gt; function(data, ...) {</span>
<span class="co">#&gt;     data_name &lt;- rlang::expr_label(substitute(data))</span>
<span class="co">#&gt;     if (!inherits(data, "data.frame")) {</span>
<span class="co">#&gt;       data &lt;- as.data.frame(data)</span>
<span class="co">#&gt;     }</span>
<span class="co">#&gt;     stopifnot(inherits(data, "data.frame"))</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     .vars &lt;- rlang::quos(...)</span>
<span class="co">#&gt;     cols &lt;- names(data)</span>
<span class="co">#&gt;     if (length(.vars) == 0) {</span>
<span class="co">#&gt;       selected &lt;- cols</span>
<span class="co">#&gt;     } else {</span>
<span class="co">#&gt;       selected &lt;- tidyselect::vars_select(cols, !!!.vars)</span>
<span class="co">#&gt;     }</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     grps &lt;- dplyr::groups(data)</span>
<span class="co">#&gt;     if (length(grps) &gt; 0) {</span>
<span class="co">#&gt;       group_variables &lt;- selected %in% as.character(grps)</span>
<span class="co">#&gt;       selected &lt;- selected[!group_variables]</span>
<span class="co">#&gt;     } else {</span>
<span class="co">#&gt;       attr(data, "groups") &lt;- list()</span>
<span class="co">#&gt;     }</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     skimmers &lt;- purrr::map(</span>
<span class="co">#&gt;       selected, get_final_skimmers, data, local_skimmers, append</span>
<span class="co">#&gt;     )</span>
<span class="co">#&gt;     types &lt;- purrr::map_chr(skimmers, "skim_type")</span>
<span class="co">#&gt;     unique_skimmers &lt;- reduce_skimmers(skimmers, types)</span>
<span class="co">#&gt;     combined_skimmers &lt;- purrr::map(unique_skimmers, join_with_base, base)</span>
<span class="co">#&gt;     ready_to_skim &lt;- tibble::tibble(</span>
<span class="co">#&gt;       skim_type = unique(types),</span>
<span class="co">#&gt;       skimmers = purrr::map(combined_skimmers, mangle_names, names(base$funs)),</span>
<span class="co">#&gt;       skim_variable = split(selected, types)[unique(types)]</span>
<span class="co">#&gt;     )</span>
<span class="co">#&gt;     grouped &lt;- dplyr::group_by(ready_to_skim, .data$skim_type)</span>
<span class="co">#&gt;     nested &lt;- dplyr::summarize(</span>
<span class="co">#&gt;       grouped,</span>
<span class="co">#&gt;       skimmed = purrr::map2(</span>
<span class="co">#&gt;         .data$skimmers, .data$skim_variable, skim_by_type, data</span>
<span class="co">#&gt;       )</span>
<span class="co">#&gt;     )</span>
<span class="co">#&gt;     structure(</span>
<span class="co">#&gt;       tidyr::unnest(nested, .data$skimmed),</span>
<span class="co">#&gt;       class = c("skim_df", "tbl_df", "tbl", "data.frame"),</span>
<span class="co">#&gt;       data_rows = nrow(data),</span>
<span class="co">#&gt;       data_cols = ncol(data),</span>
<span class="co">#&gt;       df_name = data_name,</span>
<span class="co">#&gt;       groups = dplyr::groups(data),</span>
<span class="co">#&gt;       base_skimmers = names(base$funs),</span>
<span class="co">#&gt;       skimmers_used = get_skimmers_used(unique_skimmers)</span>
<span class="co">#&gt;     )</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt; &lt;bytecode: 0x5618f38e5c70&gt;</span>
<span class="co">#&gt; &lt;environment: 0x5618f38ac0c0&gt;</span>
<span class="fu"><a href="https://docs.ropensci.org/skimr/reference/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://docs.ropensci.org/skimr/reference/skim.html">skim</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; ── Data Summary ────────────────────────</span>
<span class="co">#&gt;                            Values </span>
<span class="co">#&gt; Name                       dataset</span>
<span class="co">#&gt; Number of rows             407    </span>
<span class="co">#&gt; Number of columns          14     </span>
<span class="co">#&gt; _______________________           </span>
<span class="co">#&gt; Column type frequency:            </span>
<span class="co">#&gt;   factor                   1      </span>
<span class="co">#&gt;   numeric                  13     </span>
<span class="co">#&gt; ________________________          </span>
<span class="co">#&gt; Group variables            None   </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ── Variable type: factor ───────────────────────────────────────────────────────</span>
<span class="co">#&gt;   skim_variable n_missing complete_rate ordered n_unique top_counts   </span>
<span class="co">#&gt; 1 chas                  0             1 FALSE          2 0: 378, 1: 29</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ── Variable type: numeric ──────────────────────────────────────────────────────</span>
<span class="co">#&gt;    skim_variable n_missing complete_rate    mean      sd        p0      p25</span>
<span class="co">#&gt;  1 crim                  0             1   3.64    8.80    0.00632   0.0796</span>
<span class="co">#&gt;  2 zn                    0             1  11.9    24.2     0         0     </span>
<span class="co">#&gt;  3 indus                 0             1  11.0     6.87    0.74      4.93  </span>
<span class="co">#&gt;  4 nox                   0             1   0.555   0.117   0.385     0.448 </span>
<span class="co">#&gt;  5 rm                    0             1   6.29    0.704   3.56      5.89  </span>
<span class="co">#&gt;  6 age                   0             1  68.4    28.2     6.2      42.7   </span>
<span class="co">#&gt;  7 dis                   0             1   3.82    2.12    1.13      2.11  </span>
<span class="co">#&gt;  8 rad                   0             1   9.59    8.77    1         4     </span>
<span class="co">#&gt;  9 tax                   0             1 409.    169.    187       280.    </span>
<span class="co">#&gt; 10 ptratio               0             1  18.4     2.18   12.6      17     </span>
<span class="co">#&gt; 11 b                     0             1 357.     89.7     0.32    374.    </span>
<span class="co">#&gt; 12 lstat                 0             1  12.6     7.03    1.92      7.06  </span>
<span class="co">#&gt; 13 medv                  0             1  22.5     8.96    5        17.0   </span>
<span class="co">#&gt;        p50     p75    p100 hist </span>
<span class="co">#&gt;  1   0.268   3.69   89.0   ▇▁▁▁▁</span>
<span class="co">#&gt;  2   0      15     100     ▇▁▁▁▁</span>
<span class="co">#&gt;  3   8.56   18.1    27.7   ▇▆▁▇▁</span>
<span class="co">#&gt;  4   0.538   0.631   0.871 ▇▇▆▃▁</span>
<span class="co">#&gt;  5   6.21    6.62    8.78  ▁▁▇▂▁</span>
<span class="co">#&gt;  6  77.3    94.2   100     ▂▃▂▂▇</span>
<span class="co">#&gt;  7   3.15    5.21   12.1   ▇▅▂▁▁</span>
<span class="co">#&gt;  8   5      24      24     ▇▂▁▁▃</span>
<span class="co">#&gt;  9 334     666     711     ▇▇▃▁▇</span>
<span class="co">#&gt; 10  19      20.2    22     ▁▃▅▅▇</span>
<span class="co">#&gt; 11 391.    396.    397.    ▁▁▁▁▇</span>
<span class="co">#&gt; 12  11.3    16.5    38.0   ▇▇▃▂▁</span>
<span class="co">#&gt; 13  21.2    25      50     ▂▇▃▁▁</span></code></pre></div>
<div class="sourceCode" id="cb832"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataset</span><span class="op">[</span>,<span class="fl">4</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/h2o/man/as.numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">[</span>,<span class="fl">4</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb833"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://docs.ropensci.org/skimr/reference/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://docs.ropensci.org/skimr/reference/skim.html">skim</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; ── Data Summary ────────────────────────</span>
<span class="co">#&gt;                            Values </span>
<span class="co">#&gt; Name                       dataset</span>
<span class="co">#&gt; Number of rows             407    </span>
<span class="co">#&gt; Number of columns          14     </span>
<span class="co">#&gt; _______________________           </span>
<span class="co">#&gt; Column type frequency:            </span>
<span class="co">#&gt;   numeric                  14     </span>
<span class="co">#&gt; ________________________          </span>
<span class="co">#&gt; Group variables            None   </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ── Variable type: numeric ──────────────────────────────────────────────────────</span>
<span class="co">#&gt;    skim_variable n_missing complete_rate     mean      sd        p0      p25</span>
<span class="co">#&gt;  1 crim                  0             1   3.64     8.80    0.00632   0.0796</span>
<span class="co">#&gt;  2 zn                    0             1  11.9     24.2     0         0     </span>
<span class="co">#&gt;  3 indus                 0             1  11.0      6.87    0.74      4.93  </span>
<span class="co">#&gt;  4 chas                  0             1   0.0713   0.258   0         0     </span>
<span class="co">#&gt;  5 nox                   0             1   0.555    0.117   0.385     0.448 </span>
<span class="co">#&gt;  6 rm                    0             1   6.29     0.704   3.56      5.89  </span>
<span class="co">#&gt;  7 age                   0             1  68.4     28.2     6.2      42.7   </span>
<span class="co">#&gt;  8 dis                   0             1   3.82     2.12    1.13      2.11  </span>
<span class="co">#&gt;  9 rad                   0             1   9.59     8.77    1         4     </span>
<span class="co">#&gt; 10 tax                   0             1 409.     169.    187       280.    </span>
<span class="co">#&gt; 11 ptratio               0             1  18.4      2.18   12.6      17     </span>
<span class="co">#&gt; 12 b                     0             1 357.      89.7     0.32    374.    </span>
<span class="co">#&gt; 13 lstat                 0             1  12.6      7.03    1.92      7.06  </span>
<span class="co">#&gt; 14 medv                  0             1  22.5      8.96    5        17.0   </span>
<span class="co">#&gt;        p50     p75    p100 hist </span>
<span class="co">#&gt;  1   0.268   3.69   89.0   ▇▁▁▁▁</span>
<span class="co">#&gt;  2   0      15     100     ▇▁▁▁▁</span>
<span class="co">#&gt;  3   8.56   18.1    27.7   ▇▆▁▇▁</span>
<span class="co">#&gt;  4   0       0       1     ▇▁▁▁▁</span>
<span class="co">#&gt;  5   0.538   0.631   0.871 ▇▇▆▃▁</span>
<span class="co">#&gt;  6   6.21    6.62    8.78  ▁▁▇▂▁</span>
<span class="co">#&gt;  7  77.3    94.2   100     ▂▃▂▂▇</span>
<span class="co">#&gt;  8   3.15    5.21   12.1   ▇▅▂▁▁</span>
<span class="co">#&gt;  9   5      24      24     ▇▂▁▁▃</span>
<span class="co">#&gt; 10 334     666     711     ▇▇▃▁▇</span>
<span class="co">#&gt; 11  19      20.2    22     ▁▃▅▅▇</span>
<span class="co">#&gt; 12 391.    396.    397.    ▁▁▁▁▇</span>
<span class="co">#&gt; 13  11.3    16.5    38.0   ▇▇▃▂▁</span>
<span class="co">#&gt; 14  21.2    25      50     ▂▇▃▁▁</span></code></pre></div>
<blockquote>
<p>no more factors or character variables</p>
</blockquote>
<div id="variables-correlation" class="section level3">
<h3>
<span class="header-section-number">33.3.1</span> Variables correlation<a class="anchor" aria-label="anchor" href="#variables-correlation"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb834"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># find correlation between variables</span>
<span class="fu"><a href="https://rdrr.io/pkg/h2o/man/h2o.cor.html">cor</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt;            crim      zn   indus     chas     nox     rm     age    dis      rad</span>
<span class="co">#&gt; crim     1.0000 -0.1996  0.4076 -0.05507  0.4099 -0.194  0.3524 -0.376  0.60834</span>
<span class="co">#&gt; zn      -0.1996  1.0000 -0.5314 -0.02987 -0.5202  0.311 -0.5845  0.680 -0.32273</span>
<span class="co">#&gt; indus    0.4076 -0.5314  1.0000  0.06583  0.7733 -0.383  0.6512 -0.711  0.61998</span>
<span class="co">#&gt; chas    -0.0551 -0.0299  0.0658  1.00000  0.0934  0.127  0.0735 -0.099 -0.00245</span>
<span class="co">#&gt; nox      0.4099 -0.5202  0.7733  0.09340  1.0000 -0.296  0.7338 -0.769  0.62760</span>
<span class="co">#&gt; rm      -0.1940  0.3111 -0.3826  0.12677 -0.2961  1.000 -0.2262  0.207 -0.22126</span>
<span class="co">#&gt; age      0.3524 -0.5845  0.6512  0.07350  0.7338 -0.226  1.0000 -0.749  0.46896</span>
<span class="co">#&gt; dis     -0.3756  0.6799 -0.7113 -0.09905 -0.7693  0.207 -0.7492  1.000 -0.50372</span>
<span class="co">#&gt; rad      0.6083 -0.3227  0.6200 -0.00245  0.6276 -0.221  0.4690 -0.504  1.00000</span>
<span class="co">#&gt; tax      0.5711 -0.3184  0.7185 -0.03064  0.6758 -0.295  0.5058 -0.526  0.92005</span>
<span class="co">#&gt; ptratio  0.2897 -0.3888  0.3782 -0.12283  0.1888 -0.365  0.2709 -0.228  0.47971</span>
<span class="co">#&gt; b       -0.3442  0.1747 -0.3644  0.03782 -0.3684  0.126 -0.2742  0.284 -0.42314</span>
<span class="co">#&gt; lstat    0.4229 -0.4219  0.6136 -0.08430  0.5839 -0.612  0.6066 -0.501  0.50251</span>
<span class="co">#&gt;             tax ptratio       b   lstat</span>
<span class="co">#&gt; crim     0.5711   0.290 -0.3442  0.4229</span>
<span class="co">#&gt; zn      -0.3184  -0.389  0.1747 -0.4219</span>
<span class="co">#&gt; indus    0.7185   0.378 -0.3644  0.6136</span>
<span class="co">#&gt; chas    -0.0306  -0.123  0.0378 -0.0843</span>
<span class="co">#&gt; nox      0.6758   0.189 -0.3684  0.5839</span>
<span class="co">#&gt; rm      -0.2953  -0.365  0.1260 -0.6120</span>
<span class="co">#&gt; age      0.5058   0.271 -0.2742  0.6066</span>
<span class="co">#&gt; dis     -0.5264  -0.228  0.2843 -0.5013</span>
<span class="co">#&gt; rad      0.9201   0.480 -0.4231  0.5025</span>
<span class="co">#&gt; tax      1.0000   0.469 -0.4303  0.5538</span>
<span class="co">#&gt; ptratio  0.4691   1.000 -0.1700  0.4093</span>
<span class="co">#&gt; b       -0.4303  -0.170  1.0000 -0.3509</span>
<span class="co">#&gt; lstat    0.5538   0.409 -0.3509  1.0000</span></code></pre></div>
<div class="sourceCode" id="cb835"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>

<span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/h2o/man/h2o.cor.html">cor</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/diag.html">diag</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">0</span></code></pre></div>
<div class="sourceCode" id="cb836"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># select variables with correlation 0.7 and above</span>
<span class="va">threshold</span> <span class="op">&lt;-</span> <span class="fl">0.7</span>
<span class="va">ok</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/h2o/man/apply.html">apply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="va">threshold</span>, <span class="fl">1</span>, <span class="va">any</span><span class="op">)</span>
<span class="va">m</span><span class="op">[</span><span class="va">ok</span>, <span class="va">ok</span><span class="op">]</span>
<span class="co">#&gt;        indus    nox    age    dis    rad    tax</span>
<span class="co">#&gt; indus  0.000  0.773  0.651 -0.711  0.620  0.719</span>
<span class="co">#&gt; nox    0.773  0.000  0.734 -0.769  0.628  0.676</span>
<span class="co">#&gt; age    0.651  0.734  0.000 -0.749  0.469  0.506</span>
<span class="co">#&gt; dis   -0.711 -0.769 -0.749  0.000 -0.504 -0.526</span>
<span class="co">#&gt; rad    0.620  0.628  0.469 -0.504  0.000  0.920</span>
<span class="co">#&gt; tax    0.719  0.676  0.506 -0.526  0.920  0.000</span></code></pre></div>
<div class="sourceCode" id="cb837"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># values of correlation &gt;= 0.7</span>
<span class="va">ind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">13</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">m</span><span class="op">[</span>, <span class="va">x</span><span class="op">]</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0.7</span><span class="op">)</span>
<span class="va">m</span><span class="op">[</span><span class="va">ind</span><span class="op">]</span>
<span class="co">#&gt;  [1]  0.773 -0.711  0.719  0.773  0.734 -0.769  0.734 -0.749 -0.711 -0.769</span>
<span class="co">#&gt; [11] -0.749  0.920  0.719  0.920</span></code></pre></div>
<div class="sourceCode" id="cb838"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># defining a index for selecting if the condition is met</span>
<span class="va">cind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/h2o/man/apply.html">apply</a></span><span class="op">(</span><span class="va">m</span>, <span class="fl">2</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/any.html">any</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0.7</span><span class="op">)</span><span class="op">)</span>
<span class="va">cm</span> <span class="op">&lt;-</span> <span class="va">m</span><span class="op">[</span>, <span class="va">cind</span><span class="op">]</span> <span class="co"># since col6 only has values less than 0.5 it is not taken</span>
<span class="va">cm</span>
<span class="co">#&gt;           indus     nox     age    dis      rad     tax</span>
<span class="co">#&gt; crim     0.4076  0.4099  0.3524 -0.376  0.60834  0.5711</span>
<span class="co">#&gt; zn      -0.5314 -0.5202 -0.5845  0.680 -0.32273 -0.3184</span>
<span class="co">#&gt; indus    0.0000  0.7733  0.6512 -0.711  0.61998  0.7185</span>
<span class="co">#&gt; chas     0.0658  0.0934  0.0735 -0.099 -0.00245 -0.0306</span>
<span class="co">#&gt; nox      0.7733  0.0000  0.7338 -0.769  0.62760  0.6758</span>
<span class="co">#&gt; rm      -0.3826 -0.2961 -0.2262  0.207 -0.22126 -0.2953</span>
<span class="co">#&gt; age      0.6512  0.7338  0.0000 -0.749  0.46896  0.5058</span>
<span class="co">#&gt; dis     -0.7113 -0.7693 -0.7492  0.000 -0.50372 -0.5264</span>
<span class="co">#&gt; rad      0.6200  0.6276  0.4690 -0.504  0.00000  0.9201</span>
<span class="co">#&gt; tax      0.7185  0.6758  0.5058 -0.526  0.92005  0.0000</span>
<span class="co">#&gt; ptratio  0.3782  0.1888  0.2709 -0.228  0.47971  0.4691</span>
<span class="co">#&gt; b       -0.3644 -0.3684 -0.2742  0.284 -0.42314 -0.4303</span>
<span class="co">#&gt; lstat    0.6136  0.5839  0.6066 -0.501  0.50251  0.5538</span></code></pre></div>
<div class="sourceCode" id="cb839"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/h2o/man/apply.html">apply</a></span><span class="op">(</span><span class="va">cm</span>, <span class="fl">1</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/any.html">any</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0.7</span><span class="op">)</span><span class="op">)</span>  
<span class="va">rm</span> <span class="op">&lt;-</span> <span class="va">cm</span><span class="op">[</span><span class="va">rind</span>, <span class="op">]</span>
<span class="va">rm</span>
<span class="co">#&gt;        indus    nox    age    dis    rad    tax</span>
<span class="co">#&gt; indus  0.000  0.773  0.651 -0.711  0.620  0.719</span>
<span class="co">#&gt; nox    0.773  0.000  0.734 -0.769  0.628  0.676</span>
<span class="co">#&gt; age    0.651  0.734  0.000 -0.749  0.469  0.506</span>
<span class="co">#&gt; dis   -0.711 -0.769 -0.749  0.000 -0.504 -0.526</span>
<span class="co">#&gt; rad    0.620  0.628  0.469 -0.504  0.000  0.920</span>
<span class="co">#&gt; tax    0.719  0.676  0.506 -0.526  0.920  0.000</span></code></pre></div>
</div>
<div id="a-look-at-the-variables" class="section level3">
<h3>
<span class="header-section-number">33.3.2</span> A look at the variables<a class="anchor" aria-label="anchor" href="#a-look-at-the-variables"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb840"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># histograms for each attribute</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span>
<span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">13</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">[</span>,<span class="va">i</span><span class="op">]</span>, main<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<div class="inline-figure"><img src="402-algo-comparison_321-regression_boston-multi_files/figure-html/plot-histograms-1.png" width="70%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb841"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># density plot for each attribute</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span>
<span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">13</span><span class="op">)</span> <span class="op">{</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/density.html">density</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">[</span>,<span class="va">i</span><span class="op">]</span><span class="op">)</span>, main<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<div class="inline-figure"><img src="402-algo-comparison_321-regression_boston-multi_files/figure-html/plot-density-1.png" width="70%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb842"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># boxplots for each attribute</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span>
<span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">13</span><span class="op">)</span> <span class="op">{</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">[</span>,<span class="va">i</span><span class="op">]</span>, main<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<div class="inline-figure"><img src="402-algo-comparison_321-regression_boston-multi_files/figure-html/plot-boxplots,%20-1.png" width="70%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb843"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># scatter plot matrix</span>
<span class="fu"><a href="https://rdrr.io/pkg/ellipse/man/pairs.html">pairs</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="402-algo-comparison_321-regression_boston-multi_files/figure-html/unnamed-chunk-17-1.png" width="70%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb844"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># correlation plot</span>
<span class="va">correlations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/h2o/man/h2o.cor.html">cor</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/corrplot/man/corrplot.html">corrplot</a></span><span class="op">(</span><span class="va">correlations</span>, method<span class="op">=</span><span class="st">"circle"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="402-algo-comparison_321-regression_boston-multi_files/figure-html/plot-correlation-1.png" width="70%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="evaluation-of-algorithms" class="section level2">
<h2>
<span class="header-section-number">33.4</span> Evaluation of algorithms<a class="anchor" aria-label="anchor" href="#evaluation-of-algorithms"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb845"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Run algorithms using 10-fold cross-validation</span>
<span class="va">trainControl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/trainControl.html">trainControl</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"repeatedcv"</span>, number<span class="op">=</span><span class="fl">10</span>, repeats<span class="op">=</span><span class="fl">3</span><span class="op">)</span>
<span class="va">metric</span> <span class="op">&lt;-</span> <span class="st">"RMSE"</span></code></pre></div>
<div class="sourceCode" id="cb846"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># LM</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.lm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"lm"</span>, 
                metric<span class="op">=</span><span class="va">metric</span>, preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span>, 
                trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># GLM</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.glm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"glm"</span>, 
                 metric<span class="op">=</span><span class="va">metric</span>, preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span>, 
                 trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># GLMNET</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.glmnet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"glmnet"</span>, 
                    metric<span class="op">=</span><span class="va">metric</span>, 
                    preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span>, 
                    trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># SVM</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.svm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"svmRadial"</span>, 
                 metric<span class="op">=</span><span class="va">metric</span>, 
                 preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span>, 
                 trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># CART</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span><span class="op">(</span>.cp<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>
<span class="va">fit.cart</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"rpart"</span>, 
                  metric<span class="op">=</span><span class="va">metric</span>, tuneGrid<span class="op">=</span><span class="va">grid</span>, 
                  preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span>, 
                  trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># KNN</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.knn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"knn"</span>, 
                 metric<span class="op">=</span><span class="va">metric</span>, preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span>, 
                 trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb847"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Compare algorithms</span>
<span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/resamples.html">resamples</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>LM     <span class="op">=</span> <span class="va">fit.lm</span>, 
                          GLM    <span class="op">=</span> <span class="va">fit.glm</span>, 
                          GLMNET <span class="op">=</span> <span class="va">fit.glmnet</span>, 
                          SVM    <span class="op">=</span> <span class="va">fit.svm</span>, 
                          CART   <span class="op">=</span> <span class="va">fit.cart</span>, 
                          KNN    <span class="op">=</span> <span class="va">fit.knn</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; summary.resamples(object = results)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Models: LM, GLM, GLMNET, SVM, CART, KNN </span>
<span class="co">#&gt; Number of resamples: 30 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MAE </span>
<span class="co">#&gt;        Min. 1st Qu. Median Mean 3rd Qu. Max. NA's</span>
<span class="co">#&gt; LM     2.30    2.90   3.37 3.32    3.70 4.64    0</span>
<span class="co">#&gt; GLM    2.30    2.90   3.37 3.32    3.70 4.64    0</span>
<span class="co">#&gt; GLMNET 2.30    2.88   3.34 3.30    3.70 4.63    0</span>
<span class="co">#&gt; SVM    1.42    1.99   2.52 2.39    2.65 3.35    0</span>
<span class="co">#&gt; CART   2.22    2.62   2.88 2.93    3.08 4.16    0</span>
<span class="co">#&gt; KNN    1.98    2.69   2.87 2.95    3.24 4.00    0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; RMSE </span>
<span class="co">#&gt;        Min. 1st Qu. Median Mean 3rd Qu. Max. NA's</span>
<span class="co">#&gt; LM     2.99    3.87   4.63 4.63    5.32 6.69    0</span>
<span class="co">#&gt; GLM    2.99    3.87   4.63 4.63    5.32 6.69    0</span>
<span class="co">#&gt; GLMNET 2.99    3.88   4.62 4.62    5.32 6.69    0</span>
<span class="co">#&gt; SVM    2.05    2.95   3.81 3.91    4.46 6.98    0</span>
<span class="co">#&gt; CART   2.77    3.38   4.00 4.20    4.60 7.09    0</span>
<span class="co">#&gt; KNN    2.65    3.74   4.42 4.48    5.06 6.98    0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Rsquared </span>
<span class="co">#&gt;         Min. 1st Qu. Median  Mean 3rd Qu.  Max. NA's</span>
<span class="co">#&gt; LM     0.505   0.674  0.747 0.740   0.813 0.900    0</span>
<span class="co">#&gt; GLM    0.505   0.674  0.747 0.740   0.813 0.900    0</span>
<span class="co">#&gt; GLMNET 0.503   0.673  0.747 0.741   0.816 0.904    0</span>
<span class="co">#&gt; SVM    0.519   0.762  0.845 0.810   0.896 0.970    0</span>
<span class="co">#&gt; CART   0.514   0.737  0.816 0.778   0.842 0.899    0</span>
<span class="co">#&gt; KNN    0.519   0.748  0.804 0.770   0.829 0.931    0</span>
<span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">dotplot</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="402-algo-comparison_321-regression_boston-multi_files/figure-html/unnamed-chunk-19-1.png" width="70%" style="display: block; margin: auto;"></div>
</div>
<div id="feature-selection-1" class="section level2">
<h2>
<span class="header-section-number">33.5</span> Feature selection<a class="anchor" aria-label="anchor" href="#feature-selection-1"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb848"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># remove correlated attributes</span>
<span class="co"># find attributes that are highly correlated</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">cutoff</span> <span class="op">&lt;-</span> <span class="fl">0.70</span>
<span class="va">correlations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/h2o/man/h2o.cor.html">cor</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span><span class="op">)</span>
<span class="va">highlyCorrelated</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/findCorrelation.html">findCorrelation</a></span><span class="op">(</span><span class="va">correlations</span>, cutoff<span class="op">=</span><span class="va">cutoff</span><span class="op">)</span>

<span class="kw">for</span> <span class="op">(</span><span class="va">value</span> <span class="kw">in</span> <span class="va">highlyCorrelated</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://docs.ropensci.org/skimr/reference/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span><span class="op">[</span><span class="va">value</span><span class="op">]</span><span class="op">)</span>
<span class="op">}</span>
<span class="co">#&gt; [1] "indus"</span>
<span class="co">#&gt; [1] "nox"</span>
<span class="co">#&gt; [1] "tax"</span>
<span class="co">#&gt; [1] "dis"</span>

<span class="co"># create a new dataset without highly correlated features</span>
<span class="va">datasetFeatures</span> <span class="op">&lt;-</span> <span class="va">dataset</span><span class="op">[</span>,<span class="op">-</span><span class="va">highlyCorrelated</span><span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">datasetFeatures</span><span class="op">)</span>
<span class="co">#&gt; [1] 407  10</span></code></pre></div>
<div class="sourceCode" id="cb849"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Run algorithms using 10-fold cross-validation</span>
<span class="va">trainControl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/trainControl.html">trainControl</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"repeatedcv"</span>, number<span class="op">=</span><span class="fl">10</span>, repeats<span class="op">=</span><span class="fl">3</span><span class="op">)</span>
<span class="va">metric</span> <span class="op">&lt;-</span> <span class="st">"RMSE"</span>

<span class="co"># LM</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.lm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"lm"</span>, 
                metric<span class="op">=</span><span class="va">metric</span>, preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span>, 
                trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># GLM</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.glm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"glm"</span>, 
                 metric<span class="op">=</span><span class="va">metric</span>, preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span>, 
                 trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># GLMNET</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.glmnet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"glmnet"</span>, 
                    metric<span class="op">=</span><span class="va">metric</span>, 
                    preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span>, 
                    trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># SVM</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.svm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"svmRadial"</span>, 
                 metric<span class="op">=</span><span class="va">metric</span>, 
                 preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span>, 
                 trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># CART</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span><span class="op">(</span>.cp<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>
<span class="va">fit.cart</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"rpart"</span>, 
                  metric<span class="op">=</span><span class="va">metric</span>, tuneGrid<span class="op">=</span><span class="va">grid</span>, 
                  preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span>, 
                  trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># KNN</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.knn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"knn"</span>, 
                 metric<span class="op">=</span><span class="va">metric</span>, preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span>, 
                 trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>

<span class="co"># Compare algorithms</span>
<span class="va">feature_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/resamples.html">resamples</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>LM     <span class="op">=</span> <span class="va">fit.lm</span>, 
                                  GLM    <span class="op">=</span> <span class="va">fit.glm</span>, 
                                  GLMNET <span class="op">=</span> <span class="va">fit.glmnet</span>, 
                                  SVM    <span class="op">=</span> <span class="va">fit.svm</span>, 
                                  CART   <span class="op">=</span> <span class="va">fit.cart</span>, 
                                  KNN    <span class="op">=</span> <span class="va">fit.knn</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">feature_results</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; summary.resamples(object = feature_results)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Models: LM, GLM, GLMNET, SVM, CART, KNN </span>
<span class="co">#&gt; Number of resamples: 30 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MAE </span>
<span class="co">#&gt;        Min. 1st Qu. Median Mean 3rd Qu. Max. NA's</span>
<span class="co">#&gt; LM     2.30    2.90   3.37 3.32    3.70 4.64    0</span>
<span class="co">#&gt; GLM    2.30    2.90   3.37 3.32    3.70 4.64    0</span>
<span class="co">#&gt; GLMNET 2.30    2.88   3.34 3.30    3.70 4.63    0</span>
<span class="co">#&gt; SVM    1.42    1.99   2.52 2.39    2.65 3.35    0</span>
<span class="co">#&gt; CART   2.22    2.62   2.88 2.93    3.08 4.16    0</span>
<span class="co">#&gt; KNN    1.98    2.69   2.87 2.95    3.24 4.00    0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; RMSE </span>
<span class="co">#&gt;        Min. 1st Qu. Median Mean 3rd Qu. Max. NA's</span>
<span class="co">#&gt; LM     2.99    3.87   4.63 4.63    5.32 6.69    0</span>
<span class="co">#&gt; GLM    2.99    3.87   4.63 4.63    5.32 6.69    0</span>
<span class="co">#&gt; GLMNET 2.99    3.88   4.62 4.62    5.32 6.69    0</span>
<span class="co">#&gt; SVM    2.05    2.95   3.81 3.91    4.46 6.98    0</span>
<span class="co">#&gt; CART   2.77    3.38   4.00 4.20    4.60 7.09    0</span>
<span class="co">#&gt; KNN    2.65    3.74   4.42 4.48    5.06 6.98    0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Rsquared </span>
<span class="co">#&gt;         Min. 1st Qu. Median  Mean 3rd Qu.  Max. NA's</span>
<span class="co">#&gt; LM     0.505   0.674  0.747 0.740   0.813 0.900    0</span>
<span class="co">#&gt; GLM    0.505   0.674  0.747 0.740   0.813 0.900    0</span>
<span class="co">#&gt; GLMNET 0.503   0.673  0.747 0.741   0.816 0.904    0</span>
<span class="co">#&gt; SVM    0.519   0.762  0.845 0.810   0.896 0.970    0</span>
<span class="co">#&gt; CART   0.514   0.737  0.816 0.778   0.842 0.899    0</span>
<span class="co">#&gt; KNN    0.519   0.748  0.804 0.770   0.829 0.931    0</span>
<span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">dotplot</a></span><span class="op">(</span><span class="va">feature_results</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="402-algo-comparison_321-regression_boston-multi_files/figure-html/models-second-run-removeFeatures-1.png" width="70%" style="display: block; margin: auto;"></div>
<p>Comparing the results, we can see that this has made the RMSE worse for the linear and the nonlinear algorithms. The correlated attributes we removed are contributing to the accuracy of the models.</p>
</div>
<div id="evaluate-algorithms-box-cox-transform" class="section level2">
<h2>
<span class="header-section-number">33.6</span> Evaluate Algorithms: Box-Cox Transform<a class="anchor" aria-label="anchor" href="#evaluate-algorithms-box-cox-transform"><i class="fas fa-link"></i></a>
</h2>
<p>We know that some of the attributes have a skew and others perhaps have an
exponential distribution. One option would be to explore squaring and log
transforms respectively (you could try this!). Another approach would be to use a power transform and let it figure out the amount to correct each attribute. One example is the <code>Box-Cox</code> power transform. Let’s try using this transform to rescale the original data and evaluate the effect on the same 6 algorithms. We will also leave in the centering and scaling for the benefit of the instance-based methods.</p>
<div class="sourceCode" id="cb850"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Run algorithms using 10-fold cross-validation</span>
<span class="va">trainControl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/trainControl.html">trainControl</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"repeatedcv"</span>, number<span class="op">=</span><span class="fl">10</span>, repeats<span class="op">=</span><span class="fl">3</span><span class="op">)</span>
<span class="va">metric</span> <span class="op">&lt;-</span> <span class="st">"RMSE"</span>

<span class="co"># lm</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.lm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"lm"</span>, metric<span class="op">=</span><span class="va">metric</span>, 
                preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span>, <span class="st">"BoxCox"</span><span class="op">)</span>, 
                trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># GLM</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.glm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"glm"</span>, metric<span class="op">=</span><span class="va">metric</span>, 
                 preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span>, <span class="st">"BoxCox"</span><span class="op">)</span>, 
                 trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># GLMNET</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.glmnet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"glmnet"</span>, metric<span class="op">=</span><span class="va">metric</span>, 
                    preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span>, <span class="st">"BoxCox"</span><span class="op">)</span>,
                    trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># SVM</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.svm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"svmRadial"</span>, metric<span class="op">=</span><span class="va">metric</span>, 
                 preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span>, <span class="st">"BoxCox"</span><span class="op">)</span>,
                 trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># CART</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span><span class="op">(</span>.cp<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>
<span class="va">fit.cart</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"rpart"</span>, metric<span class="op">=</span><span class="va">metric</span>,
                  tuneGrid<span class="op">=</span><span class="va">grid</span>,
                  preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span>, <span class="st">"BoxCox"</span><span class="op">)</span>,
                  trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># KNN</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">fit.knn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"knn"</span>, metric<span class="op">=</span><span class="va">metric</span>, 
                 preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span>, <span class="st">"BoxCox"</span><span class="op">)</span>, 
                 trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>

<span class="co"># Compare algorithms</span>
<span class="va">transformResults</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/resamples.html">resamples</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>LM     <span class="op">=</span> <span class="va">fit.lm</span>, 
                                  GLM    <span class="op">=</span> <span class="va">fit.glm</span>, 
                                  GLMNET <span class="op">=</span> <span class="va">fit.glmnet</span>, 
                                  SVM    <span class="op">=</span> <span class="va">fit.svm</span>, 
                                  CART   <span class="op">=</span> <span class="va">fit.cart</span>, 
                                  KNN    <span class="op">=</span> <span class="va">fit.knn</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">transformResults</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; summary.resamples(object = transformResults)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Models: LM, GLM, GLMNET, SVM, CART, KNN </span>
<span class="co">#&gt; Number of resamples: 30 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MAE </span>
<span class="co">#&gt;        Min. 1st Qu. Median Mean 3rd Qu. Max. NA's</span>
<span class="co">#&gt; LM     2.10    2.80   3.21 3.18    3.45 4.44    0</span>
<span class="co">#&gt; GLM    2.10    2.80   3.21 3.18    3.45 4.44    0</span>
<span class="co">#&gt; GLMNET 2.11    2.80   3.21 3.17    3.45 4.43    0</span>
<span class="co">#&gt; SVM    1.30    1.95   2.25 2.26    2.48 3.19    0</span>
<span class="co">#&gt; CART   2.22    2.62   2.89 2.94    3.11 4.16    0</span>
<span class="co">#&gt; KNN    2.33    2.66   2.82 2.97    3.27 3.96    0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; RMSE </span>
<span class="co">#&gt;        Min. 1st Qu. Median Mean 3rd Qu. Max. NA's</span>
<span class="co">#&gt; LM     2.82    3.81   4.43 4.37    5.00 6.16    0</span>
<span class="co">#&gt; GLM    2.82    3.81   4.43 4.37    5.00 6.16    0</span>
<span class="co">#&gt; GLMNET 2.83    3.79   4.42 4.36    5.00 6.18    0</span>
<span class="co">#&gt; SVM    1.80    2.73   3.41 3.70    4.24 6.73    0</span>
<span class="co">#&gt; CART   2.77    3.38   4.00 4.23    4.83 7.09    0</span>
<span class="co">#&gt; KNN    3.01    3.73   4.37 4.52    5.02 7.30    0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Rsquared </span>
<span class="co">#&gt;         Min. 1st Qu. Median  Mean 3rd Qu.  Max. NA's</span>
<span class="co">#&gt; LM     0.560   0.712  0.775 0.766   0.825 0.910    0</span>
<span class="co">#&gt; GLM    0.560   0.712  0.775 0.766   0.825 0.910    0</span>
<span class="co">#&gt; GLMNET 0.556   0.713  0.775 0.766   0.826 0.910    0</span>
<span class="co">#&gt; SVM    0.524   0.778  0.854 0.827   0.907 0.979    0</span>
<span class="co">#&gt; CART   0.514   0.727  0.816 0.774   0.843 0.899    0</span>
<span class="co">#&gt; KNN    0.492   0.723  0.792 0.762   0.842 0.937    0</span>
<span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">dotplot</a></span><span class="op">(</span><span class="va">transformResults</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="402-algo-comparison_321-regression_boston-multi_files/figure-html/model-third-run-boxcox-1.png" width="70%" style="display: block; margin: auto;"></div>
</div>
<div id="tune-svm" class="section level2">
<h2>
<span class="header-section-number">33.7</span> Tune SVM<a class="anchor" aria-label="anchor" href="#tune-svm"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb851"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://docs.ropensci.org/skimr/reference/print.html">print</a></span><span class="op">(</span><span class="va">fit.svm</span><span class="op">)</span>
<span class="co">#&gt; Support Vector Machines with Radial Basis Function Kernel </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; 407 samples</span>
<span class="co">#&gt;  13 predictor</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Pre-processing: centered (13), scaled (13), Box-Cox transformation (11) </span>
<span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span>
<span class="co">#&gt; Summary of sample sizes: 365, 366, 366, 367, 366, 366, ... </span>
<span class="co">#&gt; Resampling results across tuning parameters:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   C     RMSE  Rsquared  MAE </span>
<span class="co">#&gt;   0.25  4.54  0.772     2.73</span>
<span class="co">#&gt;   0.50  4.07  0.802     2.46</span>
<span class="co">#&gt;   1.00  3.70  0.827     2.26</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Tuning parameter 'sigma' was held constant at a value of 0.116</span>
<span class="co">#&gt; RMSE was used to select the optimal model using the smallest value.</span>
<span class="co">#&gt; The final values used for the model were sigma = 0.116 and C = 1.</span></code></pre></div>
<p>Let’s design a grid search around a C value of 1. We might see a small trend of decreasing RMSE with increasing C, so let’s try all integer C values between 1 and 10. Another parameter that caret let us tune is the sigma parameter. This is a smoothing parameter. Good sigma values often start around 0.1, so we will try numbers before and after.</p>
<div class="sourceCode" id="cb852"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># tune SVM sigma and C parametres</span>
<span class="va">trainControl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/trainControl.html">trainControl</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"repeatedcv"</span>, number<span class="op">=</span><span class="fl">10</span>, repeats<span class="op">=</span><span class="fl">3</span><span class="op">)</span>
<span class="va">metric</span> <span class="op">&lt;-</span> <span class="st">"RMSE"</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>

<span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span><span class="op">(</span>.sigma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.025</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.15</span><span class="op">)</span>, 
                    .C <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, by<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>

<span class="va">fit.svm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"svmRadial"</span>, metric<span class="op">=</span><span class="va">metric</span>, 
                 tuneGrid<span class="op">=</span><span class="va">grid</span>, 
                 preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"BoxCox"</span><span class="op">)</span>, trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="fu"><a href="https://docs.ropensci.org/skimr/reference/print.html">print</a></span><span class="op">(</span><span class="va">fit.svm</span><span class="op">)</span>
<span class="co">#&gt; Support Vector Machines with Radial Basis Function Kernel </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; 407 samples</span>
<span class="co">#&gt;  13 predictor</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Pre-processing: Box-Cox transformation (11) </span>
<span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span>
<span class="co">#&gt; Summary of sample sizes: 365, 366, 366, 367, 366, 366, ... </span>
<span class="co">#&gt; Resampling results across tuning parameters:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   sigma  C   RMSE  Rsquared  MAE </span>
<span class="co">#&gt;   0.025   1  3.67  0.830     2.34</span>
<span class="co">#&gt;   0.025   2  3.49  0.840     2.21</span>
<span class="co">#&gt;   0.025   3  3.45  0.842     2.17</span>
<span class="co">#&gt;   0.025   4  3.42  0.844     2.14</span>
<span class="co">#&gt;   0.025   5  3.41  0.845     2.13</span>
<span class="co">#&gt;   0.025   6  3.40  0.846     2.12</span>
<span class="co">#&gt;   0.025   7  3.39  0.846     2.11</span>
<span class="co">#&gt;   0.025   8  3.39  0.846     2.11</span>
<span class="co">#&gt;   0.025   9  3.38  0.846     2.11</span>
<span class="co">#&gt;   0.025  10  3.37  0.847     2.10</span>
<span class="co">#&gt;   0.050   1  3.61  0.833     2.25</span>
<span class="co">#&gt;   0.050   2  3.44  0.843     2.17</span>
<span class="co">#&gt;   0.050   3  3.36  0.848     2.11</span>
<span class="co">#&gt;   0.050   4  3.30  0.852     2.08</span>
<span class="co">#&gt;   0.050   5  3.25  0.856     2.05</span>
<span class="co">#&gt;   0.050   6  3.20  0.860     2.03</span>
<span class="co">#&gt;   0.050   7  3.16  0.862     2.02</span>
<span class="co">#&gt;   0.050   8  3.13  0.865     2.02</span>
<span class="co">#&gt;   0.050   9  3.11  0.866     2.01</span>
<span class="co">#&gt;   0.050  10  3.10  0.867     2.01</span>
<span class="co">#&gt;   0.100   1  3.68  0.829     2.26</span>
<span class="co">#&gt;   0.100   2  3.37  0.848     2.12</span>
<span class="co">#&gt;   0.100   3  3.23  0.858     2.06</span>
<span class="co">#&gt;   0.100   4  3.17  0.862     2.04</span>
<span class="co">#&gt;   0.100   5  3.14  0.865     2.04</span>
<span class="co">#&gt;   0.100   6  3.11  0.866     2.04</span>
<span class="co">#&gt;   0.100   7  3.09  0.868     2.04</span>
<span class="co">#&gt;   0.100   8  3.09  0.868     2.04</span>
<span class="co">#&gt;   0.100   9  3.08  0.868     2.04</span>
<span class="co">#&gt;   0.100  10  3.08  0.868     2.05</span>
<span class="co">#&gt;   0.150   1  3.79  0.822     2.30</span>
<span class="co">#&gt;   0.150   2  3.42  0.846     2.14</span>
<span class="co">#&gt;   0.150   3  3.30  0.854     2.09</span>
<span class="co">#&gt;   0.150   4  3.26  0.857     2.09</span>
<span class="co">#&gt;   0.150   5  3.24  0.858     2.09</span>
<span class="co">#&gt;   0.150   6  3.23  0.858     2.10</span>
<span class="co">#&gt;   0.150   7  3.23  0.857     2.12</span>
<span class="co">#&gt;   0.150   8  3.24  0.856     2.13</span>
<span class="co">#&gt;   0.150   9  3.26  0.855     2.15</span>
<span class="co">#&gt;   0.150  10  3.27  0.854     2.17</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; RMSE was used to select the optimal model using the smallest value.</span>
<span class="co">#&gt; The final values used for the model were sigma = 0.1 and C = 9.</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span><span class="op">(</span><span class="va">fit.svm</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="402-algo-comparison_321-regression_boston-multi_files/figure-html/model-svm-run-1.png" width="70%" style="display: block; margin: auto;"></div>
</div>
<div id="ensembling" class="section level2">
<h2>
<span class="header-section-number">33.8</span> Ensembling<a class="anchor" aria-label="anchor" href="#ensembling"><i class="fas fa-link"></i></a>
</h2>
<p>We can try some ensemble methods on the problem and see if we can get a further decrease in our RMSE.</p>
<ul>
<li>Random Forest, bagging (RF).</li>
<li>Gradient Boosting Machines (GBM).</li>
<li>Cubist, boosting (CUBIST).</li>
</ul>
<div class="sourceCode" id="cb853"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># try ensembles</span>
<span class="va">seed</span> <span class="op">&lt;-</span> <span class="fl">7</span>
<span class="va">trainControl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/trainControl.html">trainControl</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"repeatedcv"</span>, number<span class="op">=</span><span class="fl">10</span>, repeats<span class="op">=</span><span class="fl">3</span><span class="op">)</span>
<span class="va">metric</span> <span class="op">&lt;-</span> <span class="st">"RMSE"</span>

<span class="co"># Random Forest</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span>
<span class="va">fit.rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"rf"</span>, metric<span class="op">=</span><span class="va">metric</span>, 
                preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"BoxCox"</span><span class="op">)</span>,
                trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>

<span class="co"># Stochastic Gradient Boosting</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span>
<span class="va">fit.gbm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"gbm"</span>, metric<span class="op">=</span><span class="va">metric</span>, 
                 preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"BoxCox"</span><span class="op">)</span>, 
                 trControl<span class="op">=</span><span class="va">trainControl</span>, verbose<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>
<span class="co"># Cubist</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span>
<span class="va">fit.cubist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method<span class="op">=</span><span class="st">"cubist"</span>, metric<span class="op">=</span><span class="va">metric</span>, 
                    preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"BoxCox"</span><span class="op">)</span>, trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="co"># Compare algorithms</span>
<span class="va">ensembleResults</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/resamples.html">resamples</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>RF  <span class="op">=</span> <span class="va">fit.rf</span>, 
                                  GBM <span class="op">=</span> <span class="va">fit.gbm</span>, 
                                  CUBIST <span class="op">=</span> <span class="va">fit.cubist</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">ensembleResults</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; summary.resamples(object = ensembleResults)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Models: RF, GBM, CUBIST </span>
<span class="co">#&gt; Number of resamples: 30 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MAE </span>
<span class="co">#&gt;        Min. 1st Qu. Median Mean 3rd Qu. Max. NA's</span>
<span class="co">#&gt; RF     1.64    1.98   2.20 2.21    2.30 3.22    0</span>
<span class="co">#&gt; GBM    1.65    1.98   2.27 2.33    2.55 3.75    0</span>
<span class="co">#&gt; CUBIST 1.31    1.75   1.95 2.00    2.17 2.89    0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; RMSE </span>
<span class="co">#&gt;        Min. 1st Qu. Median Mean 3rd Qu. Max. NA's</span>
<span class="co">#&gt; RF     2.11    2.58   3.08 3.22    3.70 6.52    0</span>
<span class="co">#&gt; GBM    1.92    2.54   3.31 3.38    3.67 6.85    0</span>
<span class="co">#&gt; CUBIST 1.79    2.38   2.74 3.09    3.78 5.79    0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Rsquared </span>
<span class="co">#&gt;         Min. 1st Qu. Median  Mean 3rd Qu.  Max. NA's</span>
<span class="co">#&gt; RF     0.597   0.852  0.900 0.869   0.919 0.972    0</span>
<span class="co">#&gt; GBM    0.558   0.815  0.889 0.851   0.912 0.964    0</span>
<span class="co">#&gt; CUBIST 0.681   0.818  0.909 0.875   0.932 0.970    0</span>
<span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">dotplot</a></span><span class="op">(</span><span class="va">ensembleResults</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="402-algo-comparison_321-regression_boston-multi_files/figure-html/models-ensembling-run-1.png" width="70%" style="display: block; margin: auto;"></div>
<p>Let’s dive deeper into Cubist and see if we can tune it further and get more skill out of it. Cubist has two parameters that are tunable with caret: committees which is the number of boosting operations and neighbors which is used during prediction and is the number of instances used to correct the rule-based prediction (although the documentation is perhaps a little ambiguous on this).</p>
<div class="sourceCode" id="cb854"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># look at parameters used for Cubist</span>
<span class="fu"><a href="https://docs.ropensci.org/skimr/reference/print.html">print</a></span><span class="op">(</span><span class="va">fit.cubist</span><span class="op">)</span>
<span class="co">#&gt; Cubist </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; 407 samples</span>
<span class="co">#&gt;  13 predictor</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Pre-processing: Box-Cox transformation (11) </span>
<span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span>
<span class="co">#&gt; Summary of sample sizes: 365, 366, 366, 367, 366, 366, ... </span>
<span class="co">#&gt; Resampling results across tuning parameters:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   committees  neighbors  RMSE  Rsquared  MAE </span>
<span class="co">#&gt;    1          0          3.94  0.805     2.50</span>
<span class="co">#&gt;    1          5          3.66  0.828     2.24</span>
<span class="co">#&gt;    1          9          3.69  0.825     2.26</span>
<span class="co">#&gt;   10          0          3.45  0.848     2.29</span>
<span class="co">#&gt;   10          5          3.19  0.868     2.04</span>
<span class="co">#&gt;   10          9          3.23  0.864     2.07</span>
<span class="co">#&gt;   20          0          3.34  0.858     2.25</span>
<span class="co">#&gt;   20          5          3.09  0.875     2.00</span>
<span class="co">#&gt;   20          9          3.12  0.872     2.03</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; RMSE was used to select the optimal model using the smallest value.</span>
<span class="co">#&gt; The final values used for the model were committees = 20 and neighbors = 5.</span></code></pre></div>
<p>Let’s use a grid search to tune around those values. We’ll try all committees between 15 and 25 and spot-check a neighbors value above and below 5.</p>
<div class="sourceCode" id="cb855"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://topepo.github.io/Cubist">Cubist</a></span><span class="op">)</span>
<span class="co"># Tune the Cubist algorithm</span>
<span class="va">trainControl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/trainControl.html">trainControl</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"repeatedcv"</span>, number<span class="op">=</span><span class="fl">10</span>, repeats<span class="op">=</span><span class="fl">3</span><span class="op">)</span>
<span class="va">metric</span> <span class="op">&lt;-</span> <span class="st">"RMSE"</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span><span class="op">(</span>.committees <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">25</span>, by<span class="op">=</span><span class="fl">1</span><span class="op">)</span>, 
                    .neighbors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span>

<span class="va">tune.cubist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dataset</span>, method <span class="op">=</span> <span class="st">"cubist"</span>, metric<span class="op">=</span><span class="va">metric</span>, 
                     preProc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"BoxCox"</span><span class="op">)</span>, 
                     tuneGrid<span class="op">=</span><span class="va">grid</span>, trControl<span class="op">=</span><span class="va">trainControl</span><span class="op">)</span>
<span class="fu"><a href="https://docs.ropensci.org/skimr/reference/print.html">print</a></span><span class="op">(</span><span class="va">tune.cubist</span><span class="op">)</span>
<span class="co">#&gt; Cubist </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; 407 samples</span>
<span class="co">#&gt;  13 predictor</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Pre-processing: Box-Cox transformation (11) </span>
<span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span>
<span class="co">#&gt; Summary of sample sizes: 365, 366, 366, 367, 366, 366, ... </span>
<span class="co">#&gt; Resampling results across tuning parameters:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   committees  neighbors  RMSE  Rsquared  MAE </span>
<span class="co">#&gt;   15          3          3.07  0.877     2.00</span>
<span class="co">#&gt;   15          5          3.13  0.873     2.02</span>
<span class="co">#&gt;   15          7          3.14  0.871     2.03</span>
<span class="co">#&gt;   16          3          3.05  0.878     1.99</span>
<span class="co">#&gt;   16          5          3.11  0.874     2.01</span>
<span class="co">#&gt;   16          7          3.12  0.872     2.02</span>
<span class="co">#&gt;   17          3          3.04  0.879     1.98</span>
<span class="co">#&gt;   17          5          3.09  0.875     2.00</span>
<span class="co">#&gt;   17          7          3.11  0.873     2.01</span>
<span class="co">#&gt;   18          3          3.03  0.880     1.97</span>
<span class="co">#&gt;   18          5          3.08  0.876     2.00</span>
<span class="co">#&gt;   18          7          3.10  0.874     2.01</span>
<span class="co">#&gt;   19          3          3.03  0.880     1.97</span>
<span class="co">#&gt;   19          5          3.08  0.876     1.99</span>
<span class="co">#&gt;   19          7          3.10  0.874     2.01</span>
<span class="co">#&gt;   20          3          3.03  0.879     1.98</span>
<span class="co">#&gt;   20          5          3.09  0.875     2.00</span>
<span class="co">#&gt;   20          7          3.10  0.874     2.01</span>
<span class="co">#&gt;   21          3          3.03  0.879     1.98</span>
<span class="co">#&gt;   21          5          3.09  0.876     2.00</span>
<span class="co">#&gt;   21          7          3.10  0.874     2.02</span>
<span class="co">#&gt;   22          3          3.03  0.879     1.98</span>
<span class="co">#&gt;   22          5          3.09  0.875     2.00</span>
<span class="co">#&gt;   22          7          3.10  0.874     2.02</span>
<span class="co">#&gt;   23          3          3.03  0.880     1.98</span>
<span class="co">#&gt;   23          5          3.09  0.876     2.01</span>
<span class="co">#&gt;   23          7          3.10  0.874     2.02</span>
<span class="co">#&gt;   24          3          3.03  0.879     1.98</span>
<span class="co">#&gt;   24          5          3.09  0.875     2.01</span>
<span class="co">#&gt;   24          7          3.11  0.873     2.02</span>
<span class="co">#&gt;   25          3          3.03  0.880     1.98</span>
<span class="co">#&gt;   25          5          3.09  0.876     2.01</span>
<span class="co">#&gt;   25          7          3.10  0.874     2.02</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; RMSE was used to select the optimal model using the smallest value.</span>
<span class="co">#&gt; The final values used for the model were committees = 25 and neighbors = 3.</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span><span class="op">(</span><span class="va">tune.cubist</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="402-algo-comparison_321-regression_boston-multi_files/figure-html/model-cubist-run-1.png" width="70%" style="display: block; margin: auto;"></div>
<blockquote>
<p>We can see that we have achieved a more accurate model again with an RMSE of 2.822 using committees = 18 and neighbors = 3.</p>
</blockquote>
<p>It looks like the results for the Cubist algorithm are the most accurate. Let’s finalize it by creating a new standalone Cubist model with the parameters above trained using the whole dataset. We must also use the Box-Cox power transform.</p>
</div>
<div id="finalize-the-model" class="section level2">
<h2>
<span class="header-section-number">33.9</span> Finalize the model<a class="anchor" aria-label="anchor" href="#finalize-the-model"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb856"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># prepare the data transform using training data</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="va">dataset</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="va">dataset</span><span class="op">[</span>,<span class="fl">14</span><span class="op">]</span>

<span class="co"># transform</span>
<span class="va">preprocessParams</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/preProcess.html">preProcess</a></span><span class="op">(</span><span class="va">x</span>, method<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"BoxCox"</span><span class="op">)</span><span class="op">)</span>
<span class="va">transX</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">preprocessParams</span>, <span class="va">x</span><span class="op">)</span>

<span class="co"># train the final model</span>
<span class="va">finalModel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://topepo.github.io/Cubist/reference/cubist.default.html">cubist</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">transX</span>, y<span class="op">=</span><span class="va">y</span>, committees<span class="op">=</span><span class="fl">18</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">finalModel</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; cubist.default(x = transX, y = y, committees = 18)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Cubist [Release 2.07 GPL Edition]  Fri Nov 20 00:39:24 2020</span>
<span class="co">#&gt; ---------------------------------</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Target attribute `outcome'</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Read 407 cases (14 attributes) from undefined.data</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 1:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 1/1: [84 cases, mean 14.29, range 5 to 27.5, est err 1.97]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &gt; -0.4864544</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 35.08 - 2.45 crim - 4.31 lstat + 2.1e-05 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 1/2: [163 cases, mean 19.37, range 7 to 31, est err 2.10]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &lt;= -0.4864544</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 186.8 - 2.34 lstat - 3.3 dis - 88 tax + 2 rad + 4.4 rm</span>
<span class="co">#&gt;            - 0.033 ptratio - 0.0116 age + 3.3e-05 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 1/3: [24 cases, mean 21.65, range 18.2 to 25.3, est err 1.19]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.326479</span>
<span class="co">#&gt;  dis &gt; 1.345056</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 43.83 + 14.5 rm - 2.29 lstat - 3.8 dis - 30 tax</span>
<span class="co">#&gt;            - 0.014 ptratio - 1.4 nox + 0.017 zn + 0.4 rad + 0.15 crim</span>
<span class="co">#&gt;            - 0.0025 age + 8e-06 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 1/4: [7 cases, mean 27.66, range 20.7 to 50, est err 7.89]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 3.326479</span>
<span class="co">#&gt;  ptratio &gt; 193.545</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 19.64 + 7.8 rm - 3.4 dis - 1.62 lstat + 0.27 crim - 0.006 age</span>
<span class="co">#&gt;            + 0.023 zn - 7 tax - 0.003 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 1/5: [141 cases, mean 30.60, range 15 to 50, est err 2.09]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 3.326479</span>
<span class="co">#&gt;  ptratio &lt;= 193.545</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 137.95 + 21.7 rm - 3.43 lstat - 4.9 dis - 87 tax - 0.0162 age</span>
<span class="co">#&gt;            - 0.039 ptratio + 0.06 crim + 0.005 zn</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 1/6: [8 cases, mean 32.16, range 22.1 to 50, est err 8.67]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.326479</span>
<span class="co">#&gt;  dis &lt;= 1.345056</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -19.71 + 18.58 lstat - 15.9 dis + 5.6 rm</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 2:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 2/1: [23 cases, mean 10.57, range 5 to 15, est err 3.06]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  crim &gt; 2.086391</span>
<span class="co">#&gt;  dis &lt;= 0.6604174</span>
<span class="co">#&gt;  b &gt; 67032.41</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 37.22 - 4.83 crim - 7 dis - 1.9 lstat - 1.9e-05 b - 0.7 rm</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 2/2: [70 cases, mean 14.82, range 5 to 50, est err 3.90]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.620525</span>
<span class="co">#&gt;  dis &lt;= 0.6604174</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 74.6 - 21 dis - 5.09 lstat - 15 tax - 0.0017 age + 6e-06 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 2/3: [18 cases, mean 18.03, range 7.5 to 50, est err 6.81]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  crim &gt; 2.086391</span>
<span class="co">#&gt;  dis &lt;= 0.6604174</span>
<span class="co">#&gt;  b &lt;= 67032.41</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 94.95 - 40.1 dis - 8.15 crim - 7.14 lstat - 3.5e-05 b - 1.3 rm</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 2/4: [258 cases, mean 20.74, range 9.5 to 36.2, est err 1.92]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.620525</span>
<span class="co">#&gt;  dis &gt; 0.6604174</span>
<span class="co">#&gt;  lstat &gt; 1.805082</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 61.89 - 2.56 lstat + 5.5 rm - 2.8 dis + 7.3e-05 b - 0.0132 age</span>
<span class="co">#&gt;            - 26 tax - 0.11 indus - 0.004 ptratio + 0.05 crim</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 2/5: [37 cases, mean 31.66, range 10.4 to 50, est err 3.70]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 3.620525</span>
<span class="co">#&gt;  lstat &gt; 1.805082</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 370.03 - 180 tax - 2.19 lstat - 1.7 dis + 2.6 rm</span>
<span class="co">#&gt;            - 0.016 ptratio - 0.25 indus + 0.12 crim - 0.0021 age</span>
<span class="co">#&gt;            + 9e-06 b - 0.5 nox</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 2/6: [42 cases, mean 38.23, range 22.8 to 50, est err 3.70]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  lstat &lt;= 1.805082</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -73.87 + 32.4 rm - 9.4e-05 b - 1.8 dis + 0.028 zn</span>
<span class="co">#&gt;            - 0.013 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 2/7: [4 cases, mean 40.20, range 37.6 to 42.8, est err 7.33]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 4.151791</span>
<span class="co">#&gt;  dis &gt; 1.114486</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 35.8</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 2/8: [8 cases, mean 47.45, range 41.3 to 50, est err 10.01]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 1.114486</span>
<span class="co">#&gt;  lstat &lt;= 1.805082</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 48.96 + 7.53 crim - 4.1e-05 b - 0.8 dis + 1.2 rm + 0.008 zn</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 3:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 3/1: [81 cases, mean 13.93, range 5 to 23.2, est err 2.24]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &gt; -0.4864544</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 55.03 - 0.0631 age - 2.11 crim + 12 nox - 4.16 lstat</span>
<span class="co">#&gt;            + 3.2e-05 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 3/2: [163 cases, mean 19.37, range 7 to 31, est err 2.29]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &lt;= -0.4864544</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 77.73 - 0.059 ptratio + 5.8 rm - 3.2 dis - 0.0139 age</span>
<span class="co">#&gt;            - 1.15 lstat - 30 tax - 1.1 nox + 0.4 rad</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 3/3: [62 cases, mean 24.01, range 18.2 to 50, est err 3.56]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.448196</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 94.86 + 18.2 rm + 0.63 crim - 68 tax - 2.3 dis - 3 nox</span>
<span class="co">#&gt;            - 0.0098 age - 0.41 indus - 0.011 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 3/4: [143 cases, mean 28.76, range 16.5 to 50, est err 2.53]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &gt; 0.9547035</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 269.46 + 17.9 rm - 6.1 dis - 153 tax + 0.96 crim - 0.0217 age</span>
<span class="co">#&gt;            - 5.5 nox - 0.62 indus - 0.028 ptratio - 0.89 lstat + 0.4 rad</span>
<span class="co">#&gt;            + 0.004 zn</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 3/5: [10 cases, mean 35.13, range 21.9 to 50, est err 9.31]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.6492998</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 58.69 - 56.8 dis - 8.4 nox</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 3/6: [10 cases, mean 41.67, range 22 to 50, est err 9.89]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &gt; 0.6492998</span>
<span class="co">#&gt;  dis &lt;= 0.9547035</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 47.93</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 4:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 4/1: [69 cases, mean 12.69, range 5 to 27.5, est err 2.55]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.719156</span>
<span class="co">#&gt;  lstat &gt; 3.508535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 180.13 - 7.2 dis + 0.039 age - 3.78 lstat - 83 tax</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 4/2: [164 cases, mean 19.42, range 12 to 31, est err 1.96]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &gt; 0.719156</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 52.75 + 7.1 rm - 2.05 lstat - 3.6 dis + 8.2e-05 b - 0.0152 age</span>
<span class="co">#&gt;            - 25 tax + 0.5 rad - 1.2 nox - 0.008 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 4/3: [11 cases, mean 20.39, range 15 to 27.9, est err 3.51]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.719156</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;  lstat &lt;= 3.508535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 21.69</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 4/4: [63 cases, mean 23.22, range 16.5 to 31.5, est err 1.67]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.483629</span>
<span class="co">#&gt;  dis &gt; 0.9731624</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 59.35 - 3.96 lstat - 3.1 dis + 1 rm - 14 tax + 0.3 rad</span>
<span class="co">#&gt;            - 0.7 nox - 0.005 ptratio + 6e-06 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 4/5: [8 cases, mean 33.08, range 22 to 50, est err 23.91]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 3.369183</span>
<span class="co">#&gt;  dis &lt;= 0.9731624</span>
<span class="co">#&gt;  lstat &gt; 2.254579</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -322.28 + 64.9 lstat + 56.8 rm - 30.2 dis</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 4/6: [7 cases, mean 33.87, range 22.1 to 50, est err 13.21]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.369183</span>
<span class="co">#&gt;  dis &lt;= 0.9731624</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -52.11 + 43.45 lstat - 30.8 dis</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 4/7: [91 cases, mean 34.43, range 21.9 to 50, est err 3.32]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 3.483629</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -33.09 + 22 rm - 5.02 lstat - 0.038 ptratio - 0.9 dis</span>
<span class="co">#&gt;            + 0.005 zn</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 4/8: [22 cases, mean 36.99, range 21.9 to 50, est err 13.21]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.9731624</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 80.3 - 17.43 lstat - 0.134 ptratio + 2.5 rm - 1.2 dis</span>
<span class="co">#&gt;            + 0.008 zn</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 5:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 5/1: [84 cases, mean 14.29, range 5 to 27.5, est err 2.81]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &gt; -0.4864544</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 56.48 + 28.5 nox - 0.0875 age - 3.58 crim - 5.9 dis</span>
<span class="co">#&gt;            - 2.96 lstat + 0.073 ptratio + 1.7e-05 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 5/2: [163 cases, mean 19.37, range 7 to 31, est err 2.38]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &lt;= -0.4864544</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 61.59 - 0.064 ptratio + 5.9 rm - 3.1 dis - 0.0142 age</span>
<span class="co">#&gt;            - 0.77 lstat - 21 tax</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 5/3: [163 cases, mean 29.94, range 16.5 to 50, est err 3.65]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 264.17 + 21.9 rm - 8 dis - 155 tax - 0.0317 age</span>
<span class="co">#&gt;            - 0.032 ptratio + 0.29 crim - 1.6 nox - 0.25 indus</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 5/4: [10 cases, mean 35.13, range 21.9 to 50, est err 11.79]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.6492998</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 68.19 - 73.4 dis + 1.1 rm + 0.11 crim - 0.6 nox - 0.1 indus</span>
<span class="co">#&gt;            - 0.0017 age - 0.12 lstat</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 6:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 6/1: [71 cases, mean 15.57, range 5 to 50, est err 4.42]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.6443245</span>
<span class="co">#&gt;  lstat &gt; 1.793385</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 45.7 - 20.6 dis - 5.38 lstat</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 6/2: [159 cases, mean 19.53, range 8.3 to 36.2, est err 2.08]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.329365</span>
<span class="co">#&gt;  dis &gt; 0.6443245</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 24.33 + 8.8 rm + 0.000118 b - 0.0146 age - 2.5 dis</span>
<span class="co">#&gt;            - 0.95 lstat + 0.37 crim - 0.32 indus + 0.02 zn - 16 tax</span>
<span class="co">#&gt;            + 0.2 rad - 0.5 nox - 0.004 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 6/3: [175 cases, mean 27.80, range 9.5 to 50, est err 2.95]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 3.329365</span>
<span class="co">#&gt;  dis &gt; 0.6443245</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 0.11 + 18.7 rm - 3.11 lstat + 8.1e-05 b - 1.1 dis + 0.19 crim</span>
<span class="co">#&gt;            - 20 tax - 0.19 indus + 0.3 rad - 0.7 nox - 0.005 ptratio</span>
<span class="co">#&gt;            + 0.006 zn</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 6/4: [8 cases, mean 32.50, range 21.9 to 50, est err 10.34]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.6443245</span>
<span class="co">#&gt;  lstat &gt; 1.793385</span>
<span class="co">#&gt;  lstat &lt;= 2.894121</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 69.38 - 71.2 dis - 0.14 lstat</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 6/5: [34 cases, mean 37.55, range 22.8 to 50, est err 3.55]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 4.151791</span>
<span class="co">#&gt;  lstat &lt;= 1.793385</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -125.14 + 41.7 rm + 4.3 rad + 1.48 indus - 0.014 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 6/6: [7 cases, mean 43.66, range 37.6 to 50, est err 3.12]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 4.151791</span>
<span class="co">#&gt;  lstat &lt;= 1.793385</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -137.67 + 44.6 rm - 0.064 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 7:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 7/1: [84 cases, mean 14.29, range 5 to 27.5, est err 2.91]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &gt; -0.4864544</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 46.85 - 3.45 crim - 0.0621 age + 14.2 nox + 4.4 dis</span>
<span class="co">#&gt;            - 2.01 lstat + 2.5e-05 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 7/2: [323 cases, mean 24.66, range 7 to 50, est err 3.68]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &lt;= -0.4864544</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 57.59 - 0.065 ptratio - 4.4 dis + 6.8 rm - 0.0143 age</span>
<span class="co">#&gt;            - 1.36 lstat - 19 tax - 0.8 nox - 0.12 crim + 0.09 indus</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 7/3: [132 cases, mean 28.24, range 16.5 to 50, est err 2.55]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &gt; 1.063503</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 270.92 + 24.5 rm - 0.0418 age - 165 tax - 5.7 dis</span>
<span class="co">#&gt;            - 0.028 ptratio + 0.26 crim + 0.017 zn</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 7/4: [7 cases, mean 36.01, range 23.3 to 50, est err 3.87]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.6002641</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 57.18 - 69.5 dis - 6.5 nox + 1.9 rm - 0.015 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 7/5: [24 cases, mean 37.55, range 21.9 to 50, est err 8.66]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &gt; 0.6002641</span>
<span class="co">#&gt;  dis &lt;= 1.063503</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -3.76 - 14.8 dis - 2.93 crim - 0.16 ptratio + 17.5 rm - 15 nox</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 8:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 8/1: [80 cases, mean 13.75, range 5 to 27.9, est err 3.51]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.719156</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 123.46 - 11.3 dis - 5.06 lstat - 45 tax + 0.9 rad + 1.7e-05 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 8/2: [164 cases, mean 19.42, range 12 to 31, est err 2.05]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &gt; 0.719156</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 227.11 - 120 tax + 6.4 rm + 9.3e-05 b - 3.3 dis + 2 rad</span>
<span class="co">#&gt;            - 0.0183 age - 0.93 lstat + 0.05 crim - 0.3 nox</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 8/3: [163 cases, mean 29.94, range 16.5 to 50, est err 3.54]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 158.14 - 5.73 lstat + 10.8 rm - 4 dis - 83 tax - 4.1 nox</span>
<span class="co">#&gt;            + 0.61 crim - 0.54 indus + 1 rad + 3.6e-05 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 8/4: [7 cases, mean 36.01, range 23.3 to 50, est err 11.44]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.6002641</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 72.89 - 87.2 dis + 0.6 rm - 0.13 lstat</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 8/5: [47 cases, mean 38.44, range 15 to 50, est err 5.71]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 3.726352</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 602.95 - 10.4 lstat + 21 rm - 326 tax - 0.093 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 9:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 9/1: [81 cases, mean 13.93, range 5 to 23.2, est err 2.91]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &gt; -0.4864544</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 41.11 - 3.98 crim - 4.42 lstat + 6.7 nox</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 9/2: [163 cases, mean 19.37, range 7 to 31, est err 2.49]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &lt;= -0.4864544</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 44.98 - 0.068 ptratio - 4.4 dis + 6.6 rm - 1.25 lstat</span>
<span class="co">#&gt;            - 0.0118 age - 0.9 nox - 12 tax - 0.08 crim + 0.06 indus</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 9/3: [132 cases, mean 28.24, range 16.5 to 50, est err 2.35]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &gt; 1.063503</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 157.67 + 22.2 rm - 0.0383 age - 104 tax - 0.033 ptratio</span>
<span class="co">#&gt;            - 2.2 dis</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 9/4: [7 cases, mean 30.76, range 21.9 to 50, est err 6.77]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 1.063503</span>
<span class="co">#&gt;  b &lt;= 66469.73</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 48.52 - 56.1 dis - 12.9 nox - 0.032 ptratio + 2.7 rm</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 9/5: [24 cases, mean 39.09, range 22 to 50, est err 6.20]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 1.063503</span>
<span class="co">#&gt;  b &gt; 66469.73</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -5.49 - 34.8 dis - 20.7 nox + 18.2 rm - 0.051 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 10:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 10/1: [327 cases, mean 19.45, range 5 to 50, est err 2.77]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.617282</span>
<span class="co">#&gt;  lstat &gt; 1.805082</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 270.78 - 4.09 lstat - 131 tax + 2.9 rad + 5.3e-05 b - 0.6 dis</span>
<span class="co">#&gt;            - 0.16 indus + 0.7 rm - 0.3 nox</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 10/2: [38 cases, mean 31.57, range 10.4 to 50, est err 4.71]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 3.617282</span>
<span class="co">#&gt;  lstat &gt; 1.805082</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 308.44 - 150 tax - 2.63 lstat + 1.6 rad - 1.9 dis - 0.49 indus</span>
<span class="co">#&gt;            + 2.5 rm + 3e-05 b - 1.2 nox + 0.14 crim - 0.005 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 10/3: [35 cases, mean 37.15, range 22.8 to 50, est err 2.76]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 4.151791</span>
<span class="co">#&gt;  lstat &lt;= 1.805082</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -71.65 + 33.4 rm - 0.017 ptratio - 0.34 lstat + 0.2 rad</span>
<span class="co">#&gt;            - 0.3 dis - 7 tax - 0.4 nox</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 10/4: [10 cases, mean 42.63, range 21.9 to 50, est err 7.11]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 4.151791</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -92.51 + 32.8 rm - 0.03 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 11:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 11/1: [84 cases, mean 14.29, range 5 to 27.5, est err 4.13]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &gt; -0.4864544</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 42.75 - 4.12 crim + 18.1 nox - 0.045 age + 6.8 dis</span>
<span class="co">#&gt;            - 1.86 lstat</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 11/2: [244 cases, mean 17.56, range 5 to 31, est err 4.29]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 34.83 - 5.2 dis - 0.058 ptratio - 0.0228 age + 5.8 rm</span>
<span class="co">#&gt;            - 0.56 lstat - 0.07 crim - 0.4 nox - 5 tax</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 11/3: [163 cases, mean 29.94, range 16.5 to 50, est err 3.49]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 151.5 + 23.3 rm - 5.5 dis + 1.01 crim - 0.0211 age</span>
<span class="co">#&gt;            - 0.052 ptratio - 98 tax + 0.031 zn</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 11/4: [10 cases, mean 35.13, range 21.9 to 50, est err 25.19]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.6492998</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 130.87 - 157.1 dis - 15.76 crim</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 12:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 12/1: [80 cases, mean 13.75, range 5 to 27.9, est err 4.76]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.719156</span>
<span class="co">#&gt;  lstat &gt; 2.894121</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 182.68 - 6.03 lstat - 7.6 dis - 76 tax + 1.3 rad - 0.52 indus</span>
<span class="co">#&gt;            + 2.6e-05 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 12/2: [300 cases, mean 19.10, range 5 to 50, est err 2.76]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.50716</span>
<span class="co">#&gt;  lstat &gt; 1.793385</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 83.61 - 3 lstat + 9.6e-05 b - 0.0072 age - 33 tax + 0.7 rad</span>
<span class="co">#&gt;            + 0.32 indus</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 12/3: [10 cases, mean 24.25, range 15.7 to 36.2, est err 13.88]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.50716</span>
<span class="co">#&gt;  tax &lt;= 1.865769</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 35.46</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 12/4: [10 cases, mean 32.66, range 21.9 to 50, est err 6.28]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.719156</span>
<span class="co">#&gt;  lstat &gt; 1.793385</span>
<span class="co">#&gt;  lstat &lt;= 2.894121</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 82.78 - 69.5 dis - 3.66 indus</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 12/5: [89 cases, mean 32.75, range 13.4 to 50, est err 3.39]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 3.50716</span>
<span class="co">#&gt;  dis &gt; 0.719156</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 313.22 + 13.7 rm - 174 tax - 3.06 lstat + 4.8e-05 b - 1.5 dis</span>
<span class="co">#&gt;            - 0.41 indus + 0.7 rad - 0.0055 age + 0.22 crim</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 12/6: [34 cases, mean 37.55, range 22.8 to 50, est err 3.25]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 4.151791</span>
<span class="co">#&gt;  lstat &lt;= 1.793385</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -86.8 + 36 rm - 0.3 lstat - 5 tax</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 12/7: [7 cases, mean 43.66, range 37.6 to 50, est err 5.79]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 4.151791</span>
<span class="co">#&gt;  lstat &lt;= 1.793385</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -158.68 + 47.4 rm - 0.02 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 13:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 13/1: [84 cases, mean 14.29, range 5 to 27.5, est err 2.87]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &gt; -0.4864544</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 54.69 - 3.79 crim - 0.0644 age + 11.4 nox - 2.53 lstat</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 13/2: [8 cases, mean 17.76, range 7 to 27.9, est err 13.69]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &lt;= -0.4864544</span>
<span class="co">#&gt;  age &gt; 296.3423</span>
<span class="co">#&gt;  b &lt;= 60875.57</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -899.55 + 3.0551 age</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 13/3: [31 cases, mean 17.94, range 7 to 27.9, est err 5.15]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &lt;= -0.4864544</span>
<span class="co">#&gt;  b &lt;= 60875.57</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 44.43 - 3.51 lstat - 0.054 ptratio - 1.4 dis - 0.26 crim</span>
<span class="co">#&gt;            - 0.0042 age - 0.21 indus + 0.9 rm</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 13/4: [163 cases, mean 19.37, range 7 to 31, est err 3.37]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &lt;= -0.4864544</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -5.76 + 0.000242 b + 8.9 rm - 5.2 dis - 0.0209 age</span>
<span class="co">#&gt;            - 0.042 ptratio - 0.63 indus</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 13/5: [163 cases, mean 29.94, range 16.5 to 50, est err 3.45]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 178.84 + 23.8 rm - 0.0343 age - 4.5 dis - 114 tax + 0.88 crim</span>
<span class="co">#&gt;            - 0.048 ptratio + 0.026 zn</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 13/6: [7 cases, mean 36.01, range 23.3 to 50, est err 14.09]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.6002641</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 45.82 - 70.3 dis - 9.9 nox + 5.1 rm + 1.5 rad</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 13/7: [31 cases, mean 37.21, range 21.9 to 50, est err 7.73]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 1.063503</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 95.05 - 4.52 lstat - 7.5 dis + 8.8 rm - 0.064 ptratio</span>
<span class="co">#&gt;            - 6.2 nox - 36 tax</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 14:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 14/1: [49 cases, mean 16.06, range 8.4 to 22.7, est err 3.17]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &gt; -0.4205732</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 12.83 + 42.3 nox - 4.77 lstat + 9.7 rm + 7.8e-05 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 14/2: [78 cases, mean 16.36, range 5 to 50, est err 5.17]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.6604174</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 110.6 - 10.4 dis - 4.85 lstat + 0.0446 age - 46 tax + 0.8 rad</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 14/3: [57 cases, mean 18.40, range 9.5 to 31, est err 2.43]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &gt; -0.9365134</span>
<span class="co">#&gt;  nox &lt;= -0.4205732</span>
<span class="co">#&gt;  age &gt; 245.2507</span>
<span class="co">#&gt;  dis &gt; 0.6604174</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 206.69 - 0.1012 age - 7.05 lstat + 12.2 nox - 67 tax + 0.3 rad</span>
<span class="co">#&gt;            + 0.5 rm - 0.3 dis</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 14/4: [230 cases, mean 20.19, range 9.5 to 36.2, est err 2.09]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.483629</span>
<span class="co">#&gt;  dis &gt; 0.6492998</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 119.15 - 2.61 lstat + 5.2 rm - 57 tax - 1.8 dis - 2.4 nox</span>
<span class="co">#&gt;            + 0.7 rad + 0.24 crim + 0.003 age - 0.007 ptratio + 9e-06 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 14/5: [48 cases, mean 20.28, range 10.2 to 24.5, est err 2.13]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &gt; -0.9365134</span>
<span class="co">#&gt;  nox &lt;= -0.4205732</span>
<span class="co">#&gt;  age &lt;= 245.2507</span>
<span class="co">#&gt;  dis &gt; 0.6604174</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 19.4 - 1.91 lstat + 1.02 indus - 0.013 age + 2.7 rm + 2.6 nox</span>
<span class="co">#&gt;            - 0.009 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 14/6: [44 cases, mean 20.69, range 14.4 to 29.6, est err 2.26]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &lt;= -0.9365134</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 87.55 - 0.000315 b - 6.5 dis + 2.6 rad - 0.59 lstat - 18 tax</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 14/7: [102 cases, mean 32.44, range 13.4 to 50, est err 3.35]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 3.483629</span>
<span class="co">#&gt;  dis &gt; 0.6492998</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 126.92 + 22.7 rm - 4.68 lstat - 85 tax - 0.036 ptratio</span>
<span class="co">#&gt;            - 1.1 dis + 0.007 zn</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 14/8: [84 cases, mean 33.40, range 21 to 50, est err 2.44]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 3.483629</span>
<span class="co">#&gt;  tax &lt;= 1.896025</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 347.12 + 25.2 rm - 213 tax - 3.5 lstat - 0.013 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 14/9: [10 cases, mean 35.13, range 21.9 to 50, est err 12.13]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.6492998</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 72.65 - 77.8 dis</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 15:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 15/1: [28 cases, mean 12.35, range 5 to 27.9, est err 4.09]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  crim &gt; 2.405809</span>
<span class="co">#&gt;  b &gt; 16084.5</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 53.45 - 7.8 crim - 3.5 lstat - 0.0189 age</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 15/2: [11 cases, mean 13.56, range 8.3 to 27.5, est err 5.99]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  crim &gt; 2.405809</span>
<span class="co">#&gt;  b &lt;= 16084.5</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 8.73 + 0.001756 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 15/3: [244 cases, mean 17.56, range 5 to 31, est err 2.73]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 103.02 - 0.0251 age - 2.37 lstat - 3.5 dis + 6.8e-05 b + 4 rm</span>
<span class="co">#&gt;            - 0.035 ptratio - 41 tax - 0.25 crim</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 15/4: [131 cases, mean 28.22, range 16.5 to 50, est err 2.59]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &gt; 1.086337</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 267.07 + 17.7 rm - 0.0421 age - 150 tax - 5.5 dis + 0.88 crim</span>
<span class="co">#&gt;            - 0.035 ptratio + 0.031 zn - 0.12 lstat - 0.3 nox</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 15/5: [13 cases, mean 33.08, range 22 to 50, est err 4.44]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &lt;= -0.7229691</span>
<span class="co">#&gt;  dis &lt;= 1.086337</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 148.52 - 0.002365 b - 85.9 nox - 1 dis + 0.16 crim + 0.8 rm</span>
<span class="co">#&gt;            + 0.007 zn - 0.0016 age - 7 tax - 0.003 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 15/6: [7 cases, mean 36.01, range 23.3 to 50, est err 7.00]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.6002641</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 50.55 - 68.1 dis - 11.4 nox + 0.00012 b + 1 rm - 0.008 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 15/7: [12 cases, mean 41.77, range 21.9 to 50, est err 9.73]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &gt; -0.7229691</span>
<span class="co">#&gt;  dis &gt; 0.6002641</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 13.74 - 92 nox - 40.5 dis - 0.023 ptratio + 2.6 rm</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 16:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 16/1: [60 cases, mean 15.95, range 7.2 to 27.5, est err 3.16]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &gt; -0.4344906</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 46.98 - 6.53 lstat - 6.9 dis - 1.1 rm</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 16/2: [45 cases, mean 16.89, range 5 to 50, est err 5.45]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &lt;= -0.4344906</span>
<span class="co">#&gt;  dis &lt;= 0.6557049</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 35.33 - 37 dis - 51.7 nox - 7.38 lstat - 0.4 rm</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 16/3: [128 cases, mean 19.97, range 9.5 to 36.2, est err 2.52]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.626081</span>
<span class="co">#&gt;  dis &gt; 0.6557049</span>
<span class="co">#&gt;  dis &lt;= 1.298828</span>
<span class="co">#&gt;  lstat &gt; 2.133251</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 61.65 - 3.35 lstat + 4.9 dis + 1.6 rm - 1.3 nox - 22 tax</span>
<span class="co">#&gt;            + 0.5 rad + 1.8e-05 b + 0.09 crim - 0.004 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 16/4: [140 cases, mean 21.93, range 12.7 to 35.1, est err 2.19]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.626081</span>
<span class="co">#&gt;  dis &gt; 1.298828</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 54.16 - 3.58 lstat + 2.2 rad - 1.6 dis - 1.9 nox + 1.8 rm</span>
<span class="co">#&gt;            - 17 tax + 1.3e-05 b + 0.06 crim - 0.003 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 16/5: [30 cases, mean 21.97, range 14.4 to 29.1, est err 2.41]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.626081</span>
<span class="co">#&gt;  dis &gt; 1.298828</span>
<span class="co">#&gt;  tax &lt;= 1.879832</span>
<span class="co">#&gt;  lstat &gt; 2.133251</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -1065.35 + 566 tax + 8.7 rm - 0.13 lstat - 0.2 dis - 0.3 nox</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 16/6: [22 cases, mean 30.88, range 10.4 to 50, est err 4.51]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 3.626081</span>
<span class="co">#&gt;  lstat &gt; 2.133251</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 42.24 + 18.7 rm - 1.5 indus - 1.84 lstat - 2.5 nox - 1.6 dis</span>
<span class="co">#&gt;            - 39 tax + 0.7 rad - 0.012 ptratio + 0.0035 age + 1.2e-05 b</span>
<span class="co">#&gt;            + 0.11 crim</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 16/7: [73 cases, mean 34.52, range 20.6 to 50, est err 3.36]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  lstat &lt;= 2.133251</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 50.6 + 19.6 rm - 2.77 lstat - 3.2 nox - 1.7 dis - 45 tax</span>
<span class="co">#&gt;            + 1 rad + 0.007 age - 0.014 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 17:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 17/1: [116 cases, mean 15.37, range 5 to 27.9, est err 2.55]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  crim &gt; 0.4779842</span>
<span class="co">#&gt;  lstat &gt; 2.944963</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 35.96 - 3.68 crim - 3.41 lstat + 0.3 nox</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 17/2: [112 cases, mean 19.13, range 7 to 31, est err 2.14]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  crim &lt;= 0.4779842</span>
<span class="co">#&gt;  lstat &gt; 2.944963</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 184.65 - 0.0365 age + 9 rm - 4.1 dis - 97 tax + 8.4e-05 b</span>
<span class="co">#&gt;            - 0.024 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 17/3: [9 cases, mean 28.37, range 15 to 50, est err 11.17]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.9547035</span>
<span class="co">#&gt;  b &lt;= 66469.73</span>
<span class="co">#&gt;  lstat &lt;= 2.944963</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = -1.12 + 0.000454 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 17/4: [179 cases, mean 29.28, range 15 to 50, est err 3.35]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  lstat &lt;= 2.944963</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 278.16 + 20 rm - 7.4 dis - 0.0356 age - 161 tax + 0.051 zn</span>
<span class="co">#&gt;            - 0.61 lstat + 0.17 crim - 0.008 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 17/5: [23 cases, mean 36.10, range 15 to 50, est err 10.83]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.9547035</span>
<span class="co">#&gt;  lstat &lt;= 2.944963</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 233.74 - 8.5 dis + 12.1 rm + 1.15 crim - 2.42 lstat - 113 tax</span>
<span class="co">#&gt;            - 0.0221 age + 0.068 zn - 0.031 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model 18:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 18/1: [84 cases, mean 14.29, range 5 to 27.5, est err 2.44]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &gt; -0.4864544</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 41.55 - 6.2 lstat + 14.6 nox + 3.8e-05 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 18/2: [163 cases, mean 19.37, range 7 to 31, est err 2.44]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  nox &lt;= -0.4864544</span>
<span class="co">#&gt;  lstat &gt; 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 172.79 - 3.67 lstat + 3.1 rad - 3.5 dis - 72 tax - 0.72 indus</span>
<span class="co">#&gt;            - 0.033 ptratio - 1.2 nox + 0.0027 age + 0.6 rm + 0.05 crim</span>
<span class="co">#&gt;            + 5e-06 b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 18/3: [106 cases, mean 25.41, range 16.5 to 50, est err 2.76]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.626081</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 10.71 - 4.6 dis - 2.21 lstat + 2.3 rad + 5.5 rm - 5.3 nox</span>
<span class="co">#&gt;            - 0.83 indus - 0.003 ptratio</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 18/4: [4 cases, mean 33.47, range 30.1 to 36.2, est err 5.61]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &lt;= 3.626081</span>
<span class="co">#&gt;  tax &lt;= 1.863917</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 36.84</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 18/5: [10 cases, mean 35.13, range 21.9 to 50, est err 17.40]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  dis &lt;= 0.6492998</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 84.58 - 94.7 dis - 0.15 lstat</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Rule 18/6: [57 cases, mean 38.38, range 21.9 to 50, est err 3.97]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     if</span>
<span class="co">#&gt;  rm &gt; 3.626081</span>
<span class="co">#&gt;  lstat &lt;= 2.848535</span>
<span class="co">#&gt;     then</span>
<span class="co">#&gt;  outcome = 100.34 + 22.3 rm - 5.79 lstat - 0.062 ptratio - 69 tax</span>
<span class="co">#&gt;            + 0.3 rad - 0.5 nox - 0.3 dis + 0.0011 age</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Evaluation on training data (407 cases):</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Average  |error|               1.72</span>
<span class="co">#&gt;     Relative |error|               0.26</span>
<span class="co">#&gt;     Correlation coefficient        0.96</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Attribute usage:</span>
<span class="co">#&gt;    Conds  Model</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     72%    84%    lstat</span>
<span class="co">#&gt;     38%    85%    dis</span>
<span class="co">#&gt;     35%    80%    rm</span>
<span class="co">#&gt;     27%    55%    nox</span>
<span class="co">#&gt;      4%    58%    crim</span>
<span class="co">#&gt;      2%    49%    b</span>
<span class="co">#&gt;      2%    68%    ptratio</span>
<span class="co">#&gt;      1%    78%    tax</span>
<span class="co">#&gt;      1%    67%    age</span>
<span class="co">#&gt;            41%    rad</span>
<span class="co">#&gt;            36%    indus</span>
<span class="co">#&gt;            20%    zn</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Time: 0.1 secs</span></code></pre></div>
<p>We can now use this model to evaluate our held-out validation dataset. Again, we must prepare the input data using the same Box-Cox transform.</p>
<div class="sourceCode" id="cb857"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># transform the validation dataset</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="va">valX</span> <span class="op">&lt;-</span> <span class="va">validation</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span>
<span class="va">trans_valX</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">preprocessParams</span>, <span class="va">valX</span><span class="op">)</span>
<span class="va">valY</span> <span class="op">&lt;-</span> <span class="va">validation</span><span class="op">[</span>,<span class="fl">14</span><span class="op">]</span>

<span class="co"># use final model to make predictions on the validation dataset</span>
<span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">finalModel</span>, newdata <span class="op">=</span> <span class="va">trans_valX</span>, neighbors<span class="op">=</span><span class="fl">3</span><span class="op">)</span>

<span class="co"># calculate RMSE</span>
<span class="va">rmse</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/postResample.html">RMSE</a></span><span class="op">(</span><span class="va">predictions</span>, <span class="va">valY</span><span class="op">)</span>
<span class="va">r2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/postResample.html">R2</a></span><span class="op">(</span><span class="va">predictions</span>, <span class="va">valY</span><span class="op">)</span>
<span class="fu"><a href="https://docs.ropensci.org/skimr/reference/print.html">print</a></span><span class="op">(</span><span class="va">rmse</span><span class="op">)</span>
<span class="co">#&gt; [1] 3.24</span></code></pre></div>
<blockquote>
<p>We can see that the estimated RMSE on this unseen data is about 2.666, lower but not too dissimilar from our expected RMSE of 2.822.</p>
</blockquote>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="evaluation-of-three-linear-regression-models.html"><span class="header-section-number">32</span> Evaluation of three linear regression models</a></div>
<div class="next"><a href="comparing-regression-models.html"><span class="header-section-number">34</span> Comparing regression models</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#comparison-of-six-linear-regression-algorithms"><span class="header-section-number">33</span> Comparison of six Linear Regression algorithms</a></li>
<li><a class="nav-link" href="#introduction-16"><span class="header-section-number">33.1</span> Introduction</a></li>
<li><a class="nav-link" href="#workflow-4"><span class="header-section-number">33.2</span> Workflow</a></li>
<li>
<a class="nav-link" href="#preparing-the-data"><span class="header-section-number">33.3</span> Preparing the data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#variables-correlation"><span class="header-section-number">33.3.1</span> Variables correlation</a></li>
<li><a class="nav-link" href="#a-look-at-the-variables"><span class="header-section-number">33.3.2</span> A look at the variables</a></li>
</ul>
</li>
<li><a class="nav-link" href="#evaluation-of-algorithms"><span class="header-section-number">33.4</span> Evaluation of algorithms</a></li>
<li><a class="nav-link" href="#feature-selection-1"><span class="header-section-number">33.5</span> Feature selection</a></li>
<li><a class="nav-link" href="#evaluate-algorithms-box-cox-transform"><span class="header-section-number">33.6</span> Evaluate Algorithms: Box-Cox Transform</a></li>
<li><a class="nav-link" href="#tune-svm"><span class="header-section-number">33.7</span> Tune SVM</a></li>
<li><a class="nav-link" href="#ensembling"><span class="header-section-number">33.8</span> Ensembling</a></li>
<li><a class="nav-link" href="#finalize-the-model"><span class="header-section-number">33.9</span> Finalize the model</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/f0nzie/machine_learning_compilation/blob/master/402-algo-comparison_321-regression_boston-multi.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/f0nzie/machine_learning_compilation/edit/master/402-algo-comparison_321-regression_boston-multi.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>A Machine Learning Compilation</strong>" was written by Several authors. Compiled by Alfonso R. Reyes. It was last built on 2020-11-19.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
