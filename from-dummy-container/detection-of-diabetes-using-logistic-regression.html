<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 4 Detection of diabetes using Logistic Regression | A Machine Learning Book</title>
<meta name="author" content="Alfonso R. Reyes">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.2.9000/tabs.js"></script><script src="libs/bs3compat-0.2.2.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">A Machine Learning Book</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Prerequisites</a></li>
<li class="book-part">The Basics of Machine Learning</li>
<li><a class="" href="introduction-to-pca.html"><span class="header-section-number">1</span> Introduction to PCA</a></li>
<li><a class="" href="comparison-of-two-pca-packages.html"><span class="header-section-number">2</span> Comparison of two PCA packages</a></li>
<li><a class="" href="detailed-study-of-principal-component-analysis.html"><span class="header-section-number">3</span> Detailed study of Principal Component Analysis</a></li>
<li><a class="active" href="detection-of-diabetes-using-logistic-regression.html"><span class="header-section-number">4</span> Detection of diabetes using Logistic Regression</a></li>
<li><a class="" href="sensitivity-analysis-for-a-neural-network.html"><span class="header-section-number">5</span> Sensitivity analysis for a neural network</a></li>
<li><a class="" href="data-visualization-for-ml-models.html"><span class="header-section-number">6</span> Data Visualization for ML models</a></li>
<li class="book-part">Feature Engineering</li>
<li><a class="" href="ten-methods-to-assess-variable-importance.html"><span class="header-section-number">7</span> Ten methods to assess Variable Importance</a></li>
<li><a class="" href="employee-attrition-using-feature-importance.html"><span class="header-section-number">8</span> Employee Attrition using Feature Importance</a></li>
<li><a class="" href="feature-selection-to-enhance-cancer-detection.html"><span class="header-section-number">9</span> Feature Selection to enhance cancer detection</a></li>
<li><a class="" href="dealing-with-unbalanced-data.html"><span class="header-section-number">10</span> Dealing with unbalanced data</a></li>
<li><a class="" href="imputting-missing-values-with-random-forest.html"><span class="header-section-number">11</span> Imputting missing values with Random Forest</a></li>
<li class="book-part">Algorithms Comparison</li>
<li><a class="" href="introduction-to-algorithms-for-classification.html"><span class="header-section-number">12</span> Introduction to algorithms for Classification</a></li>
<li><a class="" href="comparing-classification-algorithms.html"><span class="header-section-number">13</span> Comparing Classification algorithms</a></li>
<li><a class="" href="linear-and-non-linear-algorithms-for-classification.html"><span class="header-section-number">14</span> Linear and Non-Linear Algorithms for Classification</a></li>
<li><a class="" href="predicting-flu-outcome-comparing-eight-classification-algorithms.html"><span class="header-section-number">15</span> Predicting Flu outcome comparing eight classification algorithms</a></li>
<li><a class="" href="classification-on-bad-loans.html"><span class="header-section-number">16</span> Classification on bad loans</a></li>
<li><a class="" href="comparison-of-six-linear-regression-algorithms.html"><span class="header-section-number">17</span> Comparison of six Linear Regression algorithms</a></li>
<li class="book-part">Classification</li>
<li><a class="" href="a-gentle-introduction-to-support-vector-machines.html"><span class="header-section-number">18</span> A gentle introduction to Support Vector Machines</a></li>
<li><a class="" href="broad-view-of-svm.html"><span class="header-section-number">19</span> Broad view of SVM</a></li>
<li><a class="" href="tuning-of-support-vector-machine-prediction.html"><span class="header-section-number">20</span> Tuning of Support Vector Machine prediction</a></li>
<li><a class="" href="who-buys-social-network-ads.html"><span class="header-section-number">21</span> Who buys Social Network ads</a></li>
<li><a class="" href="predicting-ozone-levels.html"><span class="header-section-number">22</span> Predicting Ozone levels</a></li>
<li><a class="" href="building-a-naive-bayes-classifier.html"><span class="header-section-number">23</span> Building a Naive Bayes Classifier</a></li>
<li><a class="" href="detect-mines-vs-rocks-with-random-forest.html"><span class="header-section-number">24</span> Detect mines vs rocks with Random Forest</a></li>
<li><a class="" href="predicting-the-type-of-glass.html"><span class="header-section-number">25</span> Predicting the type of glass</a></li>
<li><a class="" href="naive-bayes-for-sms-spam.html"><span class="header-section-number">26</span> Naive Bayes for SMS spam</a></li>
<li><a class="" href="vehicles-classiification-with-decision-trees.html"><span class="header-section-number">27</span> Vehicles classiification with Decision Trees</a></li>
<li><a class="" href="applying-naive-bayes-on-the-titanic-case.html"><span class="header-section-number">28</span> Applying Naive-Bayes on the Titanic case</a></li>
<li><a class="" href="a-detailed-study-of-bike-sharing-demand.html"><span class="header-section-number">29</span> A detailed study of bike sharing demand</a></li>
<li class="book-part">Linear Regression</li>
<li><a class="" href="linear-regression-with-islr.html"><span class="header-section-number">30</span> Linear Regression with ISLR</a></li>
<li><a class="" href="evaluation-of-three-linear-regression-models.html"><span class="header-section-number">31</span> Evaluation of three linear regression models</a></li>
<li><a class="" href="comparing-regression-models.html"><span class="header-section-number">32</span> Comparing regression models</a></li>
<li><a class="" href="finding-the-factors-of-happiness.html"><span class="header-section-number">33</span> Finding the factors of happiness</a></li>
<li><a class="" href="regression-with-a-neural-network.html"><span class="header-section-number">34</span> Regression with a neural network</a></li>
<li><a class="" href="comparing-multiple-regression-vs-a-neural-network.html"><span class="header-section-number">35</span> Comparing Multiple Regression vs a Neural Network</a></li>
<li><a class="" href="temperature-modeling-using-nested-dataframes.html"><span class="header-section-number">36</span> Temperature modeling using nested dataframes</a></li>
<li class="book-part">Neural Networks</li>
<li><a class="" href="credit-scoring-with-neuralnet.html"><span class="header-section-number">37</span> Credit Scoring with neuralnet</a></li>
<li><a class="" href="wine-classification-with-neuralnet.html"><span class="header-section-number">38</span> Wine classification with neuralnet</a></li>
<li><a class="" href="predicting-the-rating-of-cereals.html"><span class="header-section-number">39</span> Predicting the rating of cereals</a></li>
<li><a class="" href="fitting-a-linear-model-with-neural-networks.html"><span class="header-section-number">40</span> Fitting a linear model with neural networks</a></li>
<li><a class="" href="visualization-of-neural-networks.html"><span class="header-section-number">41</span> Visualization of neural networks</a></li>
<li><a class="" href="build-a-fully-connected-r-neural-network-from-scratch.html"><span class="header-section-number">42</span> Build a fully connected R neural network from scratch</a></li>
<li><a class="" href="tuning-hyperparameters-in-a-neural-network.html"><span class="header-section-number">43</span> Tuning Hyperparameters in a Neural Network</a></li>
<li><a class="" href="deep-learning-tips-for-classification-and-regression.html"><span class="header-section-number">44</span> Deep Learning tips for Classification and Regression</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="what-is-dot-hat-in-a-regression-output.html"><span class="header-section-number">A</span> What is dot hat in a regression output</a></li>
<li><a class="" href="q-q-normal-to-compare-data-to-distributions.html"><span class="header-section-number">B</span> Q-Q normal to compare data to distributions</a></li>
<li><a class="" href="qq-and-pp-plots.html"><span class="header-section-number">C</span> QQ and PP Plots</a></li>
<li><a class="" href="visualizing-residuals.html"><span class="header-section-number">D</span> Visualizing residuals</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/hadley/r-pkgs">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="detection-of-diabetes-using-logistic-regression" class="section level1">
<h1>
<span class="header-section-number">4</span> Detection of diabetes using Logistic Regression<a class="anchor" aria-label="anchor" href="#detection-of-diabetes-using-logistic-regression"><i class="fas fa-link"></i></a>
</h1>
<ul>
<li>Datasets: <code>diabetes.csv</code>
</li>
<li>Algorithms:
<ul>
<li>Logistic Regression</li>
<li>Feature Engineering</li>
</ul>
</li>
</ul>
<div id="introduction" class="section level2">
<h2>
<span class="header-section-number">4.1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction"><i class="fas fa-link"></i></a>
</h2>
<p>Source: <a href="https://github.com/AntoineGuillot2/Logistic-Regression-R/blob/master/script.R" class="uri">https://github.com/AntoineGuillot2/Logistic-Regression-R/blob/master/script.R</a>
Source: <a href="http://enhancedatascience.com/2017/04/26/r-basics-logistic-regression-with-r/" class="uri">http://enhancedatascience.com/2017/04/26/r-basics-logistic-regression-with-r/</a>
Data: <a href="https://www.kaggle.com/uciml/pima-indians-diabetes-database" class="uri">https://www.kaggle.com/uciml/pima-indians-diabetes-database</a></p>
<p>The goal of logistic regression is to predict whether an outcome will be positive (aka 1) or negative (i.e: 0). Some real life example could be:</p>
<ul>
<li>Will Emmanuel Macron win the French Presidential election or will he lose?</li>
<li>Does Mr.X has this illness or not?</li>
<li>Will this visitor click on my link or not?</li>
</ul>
<p>So, logistic regression can be used in a lot of binary classification cases and will often be run before more advanced methods. For this tutorial, we will use the diabetes detection dataset from Kaggle.</p>
<p>This dataset contains data from Pima Indians Women such as the number of pregnancies, the blood pressure, the skin thickness, … the goal of the tutorial is to be able to detect diabetes using only these measures.</p>
</div>
<div id="exploring-the-data" class="section level2">
<h2>
<span class="header-section-number">4.2</span> Exploring the data<a class="anchor" aria-label="anchor" href="#exploring-the-data"><i class="fas fa-link"></i></a>
</h2>
<p>As usual, first, let’s take a look at our data. You can download the data here then please put the file diabetes.csv in your working directory. With the summary function, we can easily summarise the different variables:</p>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://r-datatable.com">data.table</a></span><span class="op">)</span>

<span class="va">DiabetesData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">data_raw_dir</span>, <span class="st">'diabetes.csv'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Quick data summary</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">)</span>
<span class="co">#&gt;   Pregnancies       Glucose    BloodPressure   SkinThickness     Insulin   </span>
<span class="co">#&gt;  Min.   : 0.00   Min.   :  0   Min.   :  0.0   Min.   : 0.0   Min.   :  0  </span>
<span class="co">#&gt;  1st Qu.: 1.00   1st Qu.: 99   1st Qu.: 62.0   1st Qu.: 0.0   1st Qu.:  0  </span>
<span class="co">#&gt;  Median : 3.00   Median :117   Median : 72.0   Median :23.0   Median : 30  </span>
<span class="co">#&gt;  Mean   : 3.85   Mean   :121   Mean   : 69.1   Mean   :20.5   Mean   : 80  </span>
<span class="co">#&gt;  3rd Qu.: 6.00   3rd Qu.:140   3rd Qu.: 80.0   3rd Qu.:32.0   3rd Qu.:127  </span>
<span class="co">#&gt;  Max.   :17.00   Max.   :199   Max.   :122.0   Max.   :99.0   Max.   :846  </span>
<span class="co">#&gt;       BMI       DiabetesPedigreeFunction      Age          Outcome     </span>
<span class="co">#&gt;  Min.   : 0.0   Min.   :0.078            Min.   :21.0   Min.   :0.000  </span>
<span class="co">#&gt;  1st Qu.:27.3   1st Qu.:0.244            1st Qu.:24.0   1st Qu.:0.000  </span>
<span class="co">#&gt;  Median :32.0   Median :0.372            Median :29.0   Median :0.000  </span>
<span class="co">#&gt;  Mean   :32.0   Mean   :0.472            Mean   :33.2   Mean   :0.349  </span>
<span class="co">#&gt;  3rd Qu.:36.6   3rd Qu.:0.626            3rd Qu.:41.0   3rd Qu.:1.000  </span>
<span class="co">#&gt;  Max.   :67.1   Max.   :2.420            Max.   :81.0   Max.   :1.000</span></code></pre></div>
<p>The mean of the outcome is 0.35 which shows an imbalance between the classes. However, the imbalance should not be too strong to be a problem.</p>
<p>To understand the relationship between variables, a Scatter Plot Matrix will be used. To plot it, the GGally package was used.</p>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Scatter plot matrix</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggobi.github.io/ggally">GGally</a></span><span class="op">)</span>
<span class="co">#&gt; Registered S3 method overwritten by 'GGally':</span>
<span class="co">#&gt;   method from   </span>
<span class="co">#&gt;   +.gg   ggplot2</span>
<span class="fu"><a href="https://ggobi.github.io/ggally/reference/ggpairs.html">ggpairs</a></span><span class="op">(</span><span class="va">DiabetesData</span>, lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>continuous<span class="op">=</span><span class="st">'smooth'</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="003-meta_137-logistic_regression-diabetes_files/figure-html/plot-matrix-1.png" width="70%" style="display: block; margin: auto;"></div>
<p>The correlations between explanatory variables do not seem too strong. Hence the model is not likely to suffer from multicollinearity. All explanatory variable are correlated with the Outcome. At first sight, glucose rate is the most important factor to detect the outcome.</p>
</div>
<div id="logistic-regression-with-r" class="section level2">
<h2>
<span class="header-section-number">4.3</span> Logistic regression with R<a class="anchor" aria-label="anchor" href="#logistic-regression-with-r"><i class="fas fa-link"></i></a>
</h2>
<p>After variable exploration, a first model can be fitted using the glm function. With stargazer, it is easy to get nice output in ASCII or even Latex.</p>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># first model: all features</span>
<span class="va">glm1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">Outcome</span><span class="op">~</span><span class="va">.</span>, 
           <span class="va">DiabetesData</span>, 
           family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html">binomial</a></span><span class="op">(</span>link<span class="op">=</span><span class="st">"logit"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">glm1</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; glm(formula = Outcome ~ ., family = binomial(link = "logit"), </span>
<span class="co">#&gt;     data = DiabetesData)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Deviance Residuals: </span>
<span class="co">#&gt;    Min      1Q  Median      3Q     Max  </span>
<span class="co">#&gt; -2.557  -0.727  -0.416   0.727   2.930  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt;                           Estimate Std. Error z value Pr(&gt;|z|)    </span>
<span class="co">#&gt; (Intercept)              -8.404696   0.716636  -11.73  &lt; 2e-16 ***</span>
<span class="co">#&gt; Pregnancies               0.123182   0.032078    3.84  0.00012 ***</span>
<span class="co">#&gt; Glucose                   0.035164   0.003709    9.48  &lt; 2e-16 ***</span>
<span class="co">#&gt; BloodPressure            -0.013296   0.005234   -2.54  0.01107 *  </span>
<span class="co">#&gt; SkinThickness             0.000619   0.006899    0.09  0.92852    </span>
<span class="co">#&gt; Insulin                  -0.001192   0.000901   -1.32  0.18607    </span>
<span class="co">#&gt; BMI                       0.089701   0.015088    5.95  2.8e-09 ***</span>
<span class="co">#&gt; DiabetesPedigreeFunction  0.945180   0.299147    3.16  0.00158 ** </span>
<span class="co">#&gt; Age                       0.014869   0.009335    1.59  0.11119    </span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; (Dispersion parameter for binomial family taken to be 1)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Null deviance: 993.48  on 767  degrees of freedom</span>
<span class="co">#&gt; Residual deviance: 723.45  on 759  degrees of freedom</span>
<span class="co">#&gt; AIC: 741.4</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Number of Fisher Scoring iterations: 5</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va">stargazer</span><span class="op">)</span>
<span class="co">#&gt; Loading required package: stargazer</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Please cite as:</span>
<span class="co">#&gt;  Hlavac, Marek (2018). stargazer: Well-Formatted Regression and Summary Statistics Tables.</span>
<span class="co">#&gt;  R package version 5.2.2. https://CRAN.R-project.org/package=stargazer</span>
<span class="fu"><a href="https://rdrr.io/pkg/stargazer/man/stargazer.html">stargazer</a></span><span class="op">(</span><span class="va">glm1</span>,type<span class="op">=</span><span class="st">'text'</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ====================================================</span>
<span class="co">#&gt;                              Dependent variable:    </span>
<span class="co">#&gt;                          ---------------------------</span>
<span class="co">#&gt;                                    Outcome          </span>
<span class="co">#&gt; ----------------------------------------------------</span>
<span class="co">#&gt; Pregnancies                       0.123***          </span>
<span class="co">#&gt;                                    (0.032)          </span>
<span class="co">#&gt;                                                     </span>
<span class="co">#&gt; Glucose                           0.035***          </span>
<span class="co">#&gt;                                    (0.004)          </span>
<span class="co">#&gt;                                                     </span>
<span class="co">#&gt; BloodPressure                     -0.013**          </span>
<span class="co">#&gt;                                    (0.005)          </span>
<span class="co">#&gt;                                                     </span>
<span class="co">#&gt; SkinThickness                       0.001           </span>
<span class="co">#&gt;                                    (0.007)          </span>
<span class="co">#&gt;                                                     </span>
<span class="co">#&gt; Insulin                            -0.001           </span>
<span class="co">#&gt;                                    (0.001)          </span>
<span class="co">#&gt;                                                     </span>
<span class="co">#&gt; BMI                               0.090***          </span>
<span class="co">#&gt;                                    (0.015)          </span>
<span class="co">#&gt;                                                     </span>
<span class="co">#&gt; DiabetesPedigreeFunction          0.945***          </span>
<span class="co">#&gt;                                    (0.299)          </span>
<span class="co">#&gt;                                                     </span>
<span class="co">#&gt; Age                                 0.015           </span>
<span class="co">#&gt;                                    (0.009)          </span>
<span class="co">#&gt;                                                     </span>
<span class="co">#&gt; Constant                          -8.400***         </span>
<span class="co">#&gt;                                    (0.717)          </span>
<span class="co">#&gt;                                                     </span>
<span class="co">#&gt; ----------------------------------------------------</span>
<span class="co">#&gt; Observations                         768            </span>
<span class="co">#&gt; Log Likelihood                    -362.000          </span>
<span class="co">#&gt; Akaike Inf. Crit.                  741.000          </span>
<span class="co">#&gt; ====================================================</span>
<span class="co">#&gt; Note:                    *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</span></code></pre></div>
<p>The overall model is significant. As expected the glucose rate has the lowest p-value of all the variables. However, Age, Insulin and Skin Thickness are not good predictors of Diabetes.</p>
</div>
<div id="a-second-model" class="section level2">
<h2>
<span class="header-section-number">4.4</span> A second model<a class="anchor" aria-label="anchor" href="#a-second-model"><i class="fas fa-link"></i></a>
</h2>
<p>Since some variables are not significant, removing them is a good way to improve model robustness. In the second model, SkinThickness, Insulin, and Age are removed.</p>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># second model: selected features</span>
<span class="va">glm2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">Outcome</span><span class="op">~</span><span class="va">.</span>, 
         data <span class="op">=</span> <span class="va">DiabetesData</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,<span class="fl">6</span><span class="op">:</span><span class="fl">7</span>,<span class="fl">9</span><span class="op">)</span>, with<span class="op">=</span><span class="cn">F</span><span class="op">]</span>, 
         family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html">binomial</a></span><span class="op">(</span>link<span class="op">=</span><span class="st">"logit"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">glm2</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; glm(formula = Outcome ~ ., family = binomial(link = "logit"), </span>
<span class="co">#&gt;     data = DiabetesData[, c(1:3, 6:7, 9), with = F])</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Deviance Residuals: </span>
<span class="co">#&gt;    Min      1Q  Median      3Q     Max  </span>
<span class="co">#&gt; -2.793  -0.736  -0.419   0.725   2.955  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt;                          Estimate Std. Error z value Pr(&gt;|z|)    </span>
<span class="co">#&gt; (Intercept)              -7.95495    0.67582  -11.77  &lt; 2e-16 ***</span>
<span class="co">#&gt; Pregnancies               0.15349    0.02784    5.51  3.5e-08 ***</span>
<span class="co">#&gt; Glucose                   0.03466    0.00339   10.21  &lt; 2e-16 ***</span>
<span class="co">#&gt; BloodPressure            -0.01201    0.00503   -2.39    0.017 *  </span>
<span class="co">#&gt; BMI                       0.08483    0.01412    6.01  1.9e-09 ***</span>
<span class="co">#&gt; DiabetesPedigreeFunction  0.91063    0.29403    3.10    0.002 ** </span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; (Dispersion parameter for binomial family taken to be 1)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Null deviance: 993.48  on 767  degrees of freedom</span>
<span class="co">#&gt; Residual deviance: 728.56  on 762  degrees of freedom</span>
<span class="co">#&gt; AIC: 740.6</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Number of Fisher Scoring iterations: 5</span></code></pre></div>
</div>
<div id="classification-rate-and-confusion-matrix" class="section level2">
<h2>
<span class="header-section-number">4.5</span> Classification rate and confusion matrix<a class="anchor" aria-label="anchor" href="#classification-rate-and-confusion-matrix"><i class="fas fa-link"></i></a>
</h2>
<p>Now that we have our model, let’s access its performance.</p>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Correctly classified observations</span>
<span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="op">(</span><span class="va">glm2</span><span class="op">$</span><span class="va">fitted.values</span><span class="op">&gt;</span><span class="fl">0.5</span><span class="op">)</span><span class="op">==</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Outcome</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.775</span></code></pre></div>
<p>Around 77.4% of all observations are correctly classified. Due to class imbalance, we need to go further with a confusion matrix.</p>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">###Confusion matrix count</span>
<span class="va">RP</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">(</span><span class="va">glm2</span><span class="op">$</span><span class="va">fitted.values</span><span class="op">&gt;=</span><span class="fl">0.5</span><span class="op">)</span><span class="op">==</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Outcome</span> <span class="op">&amp;</span> <span class="va">DiabetesData</span><span class="op">$</span><span class="va">Outcome</span><span class="op">==</span><span class="fl">1</span><span class="op">)</span>
<span class="va">FP</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">(</span><span class="va">glm2</span><span class="op">$</span><span class="va">fitted.values</span><span class="op">&gt;=</span><span class="fl">0.5</span><span class="op">)</span><span class="op">!=</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Outcome</span> <span class="op">&amp;</span> <span class="va">DiabetesData</span><span class="op">$</span><span class="va">Outcome</span><span class="op">==</span><span class="fl">0</span><span class="op">)</span>
<span class="va">RN</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">(</span><span class="va">glm2</span><span class="op">$</span><span class="va">fitted.values</span><span class="op">&gt;=</span><span class="fl">0.5</span><span class="op">)</span><span class="op">==</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Outcome</span> <span class="op">&amp;</span> <span class="va">DiabetesData</span><span class="op">$</span><span class="va">Outcome</span><span class="op">==</span><span class="fl">0</span><span class="op">)</span>
<span class="va">FN</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">(</span><span class="va">glm2</span><span class="op">$</span><span class="va">fitted.values</span><span class="op">&gt;=</span><span class="fl">0.5</span><span class="op">)</span><span class="op">!=</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Outcome</span> <span class="op">&amp;</span> <span class="va">DiabetesData</span><span class="op">$</span><span class="va">Outcome</span><span class="op">==</span><span class="fl">1</span><span class="op">)</span>
<span class="va">confMat</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">RP</span>,<span class="va">FP</span>,<span class="va">FN</span>,<span class="va">RN</span><span class="op">)</span>,ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">confMat</span><span class="op">)</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Pred Diabetes"</span>,<span class="st">'Pred no diabetes'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">confMat</span><span class="op">)</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Real Diabetes"</span>,<span class="st">'Real no diabetes'</span><span class="op">)</span>
<span class="va">confMat</span>
<span class="co">#&gt;                  Pred Diabetes Pred no diabetes</span>
<span class="co">#&gt; Real Diabetes              154              114</span>
<span class="co">#&gt; Real no diabetes            59              441</span></code></pre></div>
<p>The model is good to detect people who do not have diabetes. However, its performance on ill people is not great (only 154 out of 268 have been correctly classified).</p>
<p>You can also get the percentage of Real/False Positive/Negative:</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Confusion matrix proportion</span>
<span class="va">RPR</span><span class="op">=</span><span class="va">RP</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Outcome</span><span class="op">==</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>
<span class="va">FNR</span><span class="op">=</span><span class="va">FN</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Outcome</span><span class="op">==</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>
<span class="va">FPR</span><span class="op">=</span><span class="va">FP</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Outcome</span><span class="op">==</span><span class="fl">0</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>
<span class="va">RNR</span><span class="op">=</span><span class="va">RN</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Outcome</span><span class="op">==</span><span class="fl">0</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>
<span class="va">confMat</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">RPR</span>,<span class="va">FPR</span>,<span class="va">FNR</span>,<span class="va">RNR</span><span class="op">)</span>,ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">confMat</span><span class="op">)</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Pred Diabetes"</span>,<span class="st">'Pred no diabetes'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">confMat</span><span class="op">)</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Real Diabetes"</span>,<span class="st">'Real no diabetes'</span><span class="op">)</span>
<span class="va">confMat</span>
<span class="co">#&gt;                  Pred Diabetes Pred no diabetes</span>
<span class="co">#&gt; Real Diabetes             57.5             42.5</span>
<span class="co">#&gt; Real no diabetes          11.8             88.2</span></code></pre></div>
<p>And here is the matrix, 57.5% of people with diabetes are correctly classified. A way to improve the false negative rate would lower the detection threshold. However, as a consequence, the false positive rate would increase.</p>
</div>
<div id="plots-and-decision-boundaries" class="section level2">
<h2>
<span class="header-section-number">4.6</span> Plots and decision boundaries<a class="anchor" aria-label="anchor" href="#plots-and-decision-boundaries"><i class="fas fa-link"></i></a>
</h2>
<p>The two strongest predictors of the outcome are Glucose rate and BMI. High glucose rate and high BMI are strong indicators of Diabetes.</p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Plot and decision boundaries</span>
<span class="va">DiabetesData</span><span class="op">$</span><span class="va">Predicted</span> <span class="op">&lt;-</span> <span class="va">glm2</span><span class="op">$</span><span class="va">fitted.values</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">DiabetesData</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">BMI</span>, y <span class="op">=</span> <span class="va">Glucose</span>, color <span class="op">=</span> <span class="va">Predicted</span> <span class="op">&gt;</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">2</span>, alpha<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="003-meta_137-logistic_regression-diabetes_files/figure-html/plot-bmi-vs-glucose-1.png" width="70%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">DiabetesData</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">BMI</span>, y <span class="op">=</span> <span class="va">Glucose</span>, color<span class="op">=</span><span class="va">Outcome</span> <span class="op">==</span> <span class="op">(</span><span class="va">Predicted</span> <span class="op">&gt;</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">2</span>, alpha<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="003-meta_137-logistic_regression-diabetes_files/figure-html/unnamed-chunk-2-1.png" width="70%" style="display: block; margin: auto;"></div>
<p>We can also plot both BMI and glucose against the outcomes, the other variables are taken at their mean level.</p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">BMI</span><span class="op">)</span>
<span class="co">#&gt; [1]  0.0 67.1</span></code></pre></div>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># BMI vs predicted</span>
<span class="va">BMI_plot</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>BMI <span class="op">=</span> <span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">BMI</span><span class="op">-</span><span class="fl">2</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span><span class="op">:</span>
                               <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">BMI</span><span class="op">+</span><span class="fl">2</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fl">100</span>,
                    Glucose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Glucose</span><span class="op">)</span>,
                    Pregnancies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Pregnancies</span><span class="op">)</span>,
                    BloodPressure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">BloodPressure</span><span class="op">)</span>,
                    DiabetesPedigreeFunction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">DiabetesPedigreeFunction</span><span class="op">)</span><span class="op">)</span>

<span class="va">BMI_plot</span><span class="op">$</span><span class="va">Predicted</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">glm2</span>, newdata <span class="op">=</span> <span class="va">BMI_plot</span>, type <span class="op">=</span> <span class="st">'response'</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">BMI_plot</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">BMI</span>, y <span class="op">=</span> <span class="va">Predicted</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="003-meta_137-logistic_regression-diabetes_files/figure-html/bmi-vs-predicted-1.png" width="70%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">BMI_plot</span><span class="op">$</span><span class="va">BMI</span><span class="op">)</span>
<span class="co">#&gt; [1] -2.0 69.1</span></code></pre></div>
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Glucose</span><span class="op">)</span>
<span class="co">#&gt; [1]   0 199</span></code></pre></div>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Glucose vs predicted</span>
<span class="va">Glucose_plot</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Glucose <span class="op">=</span> 
                        <span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Glucose</span><span class="op">-</span><span class="fl">2</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span><span class="op">:</span>
                             <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Glucose</span><span class="op">+</span><span class="fl">2</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fl">100</span>,
                    BMI<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">BMI</span><span class="op">)</span>,
                    Pregnancies<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">Pregnancies</span><span class="op">)</span>,
                    BloodPressure<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">BloodPressure</span><span class="op">)</span>,
                    DiabetesPedigreeFunction<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">DiabetesData</span><span class="op">$</span><span class="va">DiabetesPedigreeFunction</span><span class="op">)</span><span class="op">)</span>

<span class="va">Glucose_plot</span><span class="op">$</span><span class="va">Predicted</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">glm2</span>, newdata <span class="op">=</span> <span class="va">Glucose_plot</span>, type <span class="op">=</span> <span class="st">'response'</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">Glucose_plot</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Glucose</span>, y <span class="op">=</span> <span class="va">Predicted</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="003-meta_137-logistic_regression-diabetes_files/figure-html/glucose-vs-predicted-1.png" width="70%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb129"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">Glucose_plot</span><span class="op">$</span><span class="va">Glucose</span><span class="op">)</span>
<span class="co">#&gt; [1]  -2 201</span></code></pre></div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="detailed-study-of-principal-component-analysis.html"><span class="header-section-number">3</span> Detailed study of Principal Component Analysis</a></div>
<div class="next"><a href="sensitivity-analysis-for-a-neural-network.html"><span class="header-section-number">5</span> Sensitivity analysis for a neural network</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#detection-of-diabetes-using-logistic-regression"><span class="header-section-number">4</span> Detection of diabetes using Logistic Regression</a></li>
<li><a class="nav-link" href="#introduction"><span class="header-section-number">4.1</span> Introduction</a></li>
<li><a class="nav-link" href="#exploring-the-data"><span class="header-section-number">4.2</span> Exploring the data</a></li>
<li><a class="nav-link" href="#logistic-regression-with-r"><span class="header-section-number">4.3</span> Logistic regression with R</a></li>
<li><a class="nav-link" href="#a-second-model"><span class="header-section-number">4.4</span> A second model</a></li>
<li><a class="nav-link" href="#classification-rate-and-confusion-matrix"><span class="header-section-number">4.5</span> Classification rate and confusion matrix</a></li>
<li><a class="nav-link" href="#plots-and-decision-boundaries"><span class="header-section-number">4.6</span> Plots and decision boundaries</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/hadley/r-pkgs/blob/master/003-meta_137-logistic_regression-diabetes.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/hadley/r-pkgs/edit/master/003-meta_137-logistic_regression-diabetes.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>A Machine Learning Book</strong>" was written by Alfonso R. Reyes. It was last built on 2020-11-18.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
